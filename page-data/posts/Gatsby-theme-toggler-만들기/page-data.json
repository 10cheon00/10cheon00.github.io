{"componentChunkName":"component---src-templates-blog-post-js","path":"/posts/Gatsby-theme-toggler-만들기/","result":{"data":{"site":{"siteMetadata":{"title":"10cheon00의 Archive"}},"markdownRemark":{"id":"769a3f61-9512-50a7-b6c8-da5f504470d5","excerpt":"이전 게시글에서 다크모드를 적용하기로 마음만 먹고 계속 미뤘는데, 이번에 구현해보기로 마음먹었다. gatsby-plugin-dark-mode 이 플러그인은 의  속성을 변경하여 각각 다른 css…","html":"<p><a href=\"/posts/Gatsby-%EC%82%AC%EC%9D%B4%ED%8A%B8-%EA%B5%AC%EC%B6%95%EA%B8%B0\">이전 게시글</a>에서 다크모드를 적용하기로 마음만 먹고 계속 미뤘는데, 이번에 구현해보기로 마음먹었다.</p>\n<h1 id=\"gatsby-plugin-dark-mode\" style=\"position:relative;\"><a href=\"#gatsby-plugin-dark-mode\" aria-label=\"gatsby plugin dark mode permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>gatsby-plugin-dark-mode</h1>\n<p>이 플러그인은 <code class=\"language-text\">body</code>의 <code class=\"language-text\">class</code> 속성을 변경하여 각각 다른 css를 적용할 수 있는 도구를 제공하고 있다.</p>\n<p>공식 문서를 따라 아래 코드를 별도의 컴포넌트로 만들어 저장했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// src/components/theme-toggler.js</span>\n<span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ThemeToggler <span class=\"token keyword\">as</span> DarkModeThemeToggler <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'gatsby-plugin-dark-mode'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ThemeToggler</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">DarkModeThemeToggler</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> theme<span class=\"token punctuation\">,</span> toggleTheme <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n              <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>checkbox<span class=\"token punctuation\">\"</span></span>\n              <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token function\">toggleTheme</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>checked <span class=\"token operator\">?</span> <span class=\"token string\">'dark'</span> <span class=\"token operator\">:</span> <span class=\"token string\">'light'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span></span>\n              <span class=\"token attr-name\">checked</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>theme <span class=\"token operator\">===</span> <span class=\"token string\">'dark'</span><span class=\"token punctuation\">}</span></span>\n            <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">{</span><span class=\"token string\">' '</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n            Dark mode\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">DarkModeThemeToggler</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> ThemeToggler <span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>그 다음 만들어둔 컴포넌트를 <code class=\"language-text\">layout.js</code>에 포함시켜서 페이지에 노출시켰다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token operator\">...</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ThemeToggler <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"./theme-toggler\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Layout</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> location<span class=\"token punctuation\">,</span> title<span class=\"token punctuation\">,</span> children <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token operator\">...</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>global-wrapper<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">data-is-root-path</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>isRootPath<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ThemeToggler</span></span><span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>header</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>global-header<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>header<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>header</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>main</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>children<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>main</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>footer</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        © </span><span class=\"token punctuation\">{</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getFullYear</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">, Built with\n        </span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\"> </span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">href</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://www.gatsbyjs.com<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Gatsby</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>footer</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h1 id=\"css-작업\" style=\"position:relative;\"><a href=\"#css-%EC%9E%91%EC%97%85\" aria-label=\"css 작업 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>CSS 작업</h1>\n<h2 id=\"체크박스-꾸미기\" style=\"position:relative;\"><a href=\"#%EC%B2%B4%ED%81%AC%EB%B0%95%EC%8A%A4-%EA%BE%B8%EB%AF%B8%EA%B8%B0\" aria-label=\"체크박스 꾸미기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>체크박스 꾸미기</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 116px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a9843a3227405a0b4e22e4806870d791/a8277/image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.48275862068966%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA+UlEQVR42oWR206DYBCE+/5v4o0x8aIeomkRKFWorYWYNoq3ElIiAg3wHz7TE40F4yZ7szuZnZ3pAWitm1Zac6jD7K/qWvW6gRqt1JFwc0ipbTfH1V6A0m3CLMtI05Tv9IsoXjXLuq4pq6pbnRSsy7KtMM9zPqOIIktxxjbP04Dla4A/D7A9D3NkIYRi4rm4U5+Pt3fCMGQxn3A1GOLNfGqpjoRFURDHMeW6wHEsXvwlT8M7Ls7O8fyAm9s+qyTHfXQw3Bkjw2Rsm1gPAy7719wbNlJ3vJwkCWLzYlntfdmhpJS/fJJCIIRECNF4+n8oJwG1k9UN5pTwBynXGoCNvkDwAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alt text\"\n        title=\"\"\n        src=\"/static/a9843a3227405a0b4e22e4806870d791/a8277/image.png\"\n        srcset=\"/static/a9843a3227405a0b4e22e4806870d791/a8277/image.png 116w\"\n        sizes=\"(max-width: 116px) 100vw, 116px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>여기까지 했다면 이렇게 기본 체크박스가 생성되므로 보기에 좋지 않다.</p>\n<p>css로 조금 예쁘게 꾸미기 위해 <a href=\"https://www.daleseo.com/css-toggle-switch/\">이 블로그</a>를 참고했다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 142px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1e8993293215ead2ea11168957d0e059/0d76a/image-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 25.352112676056336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABOklEQVR42j2QTUrDUBSFH2iTJn0/6WtMUiqCqBWsUtCBDhSplJRStBa1aM1AFJxoN+DEgQMnLsEdCK7IvXySJ3jh48Dhcrj3CFVP0TJDB02Htxghw4TSr+kltM0cMkqcGtvENJpO//wUYzO3XyKUygi7dSo3VRamHiuPq6i9GKlSbNrCCwx+oNG2SSgbeIGm4oioSouKEryw7sJdoEwSFl8qiHdB57NDOfPvOa2dNWbFE728z+BiSnH/QKu9RT66Ih+cc3jUIx+OKR7nbHd3kSZG2QyhbErlrop4E8QfMV8/Xxy/ntDaWKOXX3B5W3BZFAxHEzb39un3TzkbXzMeTxhNpswentk/OCRQ1l0plEkpQ2U7Jlg3iGWBbzRSlx2WL0b4gcELI2o6xg8jvNDg1yx+WHeVBLLx3+Ev9m6QNRUJ0CAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alt text\"\n        title=\"\"\n        src=\"/static/1e8993293215ead2ea11168957d0e059/0d76a/image-1.png\"\n        srcset=\"/static/1e8993293215ead2ea11168957d0e059/0d76a/image-1.png 142w\"\n        sizes=\"(max-width: 142px) 100vw, 142px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"다크모드-css-만들기\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%ED%81%AC%EB%AA%A8%EB%93%9C-css-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"다크모드 css 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>다크모드 css 만들기</h2>\n<p>이제 토글할 때마다 body의 class가 달라지면서 css를 다르게 적용할 수 있게 되었다.</p>\n<p>깃허브 테마를 따라하기 위해 css변수에 rgb값을 저장하고, 그 값으로 각 element의 색깔을 정하도록 했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">:root</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">--color-background</span><span class=\"token punctuation\">:</span> #ffffff<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--color-blockquote</span><span class=\"token punctuation\">:</span> #656d76<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--color-blockquote-border</span><span class=\"token punctuation\">:</span> #d0d7de<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--color-header-border-bottom</span><span class=\"token punctuation\">:</span> #d8dee4<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--color-table-border</span><span class=\"token punctuation\">:</span> #d8dee4<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--color-table-evenRow-background</span><span class=\"token punctuation\">:</span> #f6f8fa<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--color-text</span><span class=\"token punctuation\">:</span> #1f2328<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--color-text-heading</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--color-text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--color-text-bio</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--color-text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--color-text-light</span><span class=\"token punctuation\">:</span> #656d76<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--color-codeblock-background</span><span class=\"token punctuation\">:</span> #eff1f3<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">body.dark</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">--color-background</span><span class=\"token punctuation\">:</span> #0d1117<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--color-blockquote</span><span class=\"token punctuation\">:</span> #7d8590<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--color-blockquote-border</span><span class=\"token punctuation\">:</span> #30363d<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--color-header-border-bottom</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgb</span><span class=\"token punctuation\">(</span>33<span class=\"token punctuation\">,</span> 38<span class=\"token punctuation\">,</span> 45<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--color-table-border</span><span class=\"token punctuation\">:</span> #30363d<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--color-table-evenRow-background</span><span class=\"token punctuation\">:</span> #161b22<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--color-text</span><span class=\"token punctuation\">:</span> #e6edf3<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--color-text-heading</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--color-text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--color-codeblock</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--color-text<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--color-codeblock-background</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgba</span><span class=\"token punctuation\">(</span>110<span class=\"token punctuation\">,</span> 118<span class=\"token punctuation\">,</span> 129<span class=\"token punctuation\">,</span> 0.4<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n...\n</code></pre></div>\n<h2 id=\"gatsby-remark-prismjs\" style=\"position:relative;\"><a href=\"#gatsby-remark-prismjs\" aria-label=\"gatsby remark prismjs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>gatsby-remark-prismjs</h2>\n<p>토글될 때마다 css변수가 바뀌면서 다크모드가 적용되지만, 코드블록의 색깔은 변하지 않았다. 나는 <code class=\"language-text\">prismjs</code> 플러그인으로 코드 하이라이팅을 하고 있어서 똑같이 css로 색깔을 조절할 수 있었다. 이것도 css변수를 통해 색깔값만 따로 설정하도록 변경했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token comment\">/* src/styles/prism-ghtheme.css */</span>\n\n<span class=\"token selector\">code[class*=\"language-\"],\npre[class*=\"language-\"]</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--color-prismjs-code<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">font-family</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Consolas\"</span><span class=\"token punctuation\">,</span> \"Bitstream\n  ...\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">... \n\n.token</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--color-prismjs-code<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">.token.comment,\n.token.prolog,\n.token.doctype,\n.token.cdata</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">color</span><span class=\"token punctuation\">:</span> <span class=\"token function\">var</span><span class=\"token punctuation\">(</span>--color-prismjs-token-comment<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token property\">font-style</span><span class=\"token punctuation\">:</span> italic<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n...\n</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token comment\">/* src/styles/ghcolor.css */</span>\n\n<span class=\"token selector\">:root</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">--color-prismjs-code</span><span class=\"token punctuation\">:</span> #24292f<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--color-prismjs-codeblock</span><span class=\"token punctuation\">:</span> #b3d4fc<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--bgcolor-prismjs-codeblock</span><span class=\"token punctuation\">:</span> #f6f8fa<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--color-prismjs-inlinecode</span><span class=\"token punctuation\">:</span> #24292f<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--bgcolor-prismjs-inlinecode</span><span class=\"token punctuation\">:</span> <span class=\"token function\">rgba</span><span class=\"token punctuation\">(</span>175<span class=\"token punctuation\">,</span>184<span class=\"token punctuation\">,</span> 193<span class=\"token punctuation\">,</span> 0.2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  ...\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token selector\">body.dark</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">--color-prismjs-code</span><span class=\"token punctuation\">:</span> #c9d1d9<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--color-prismjs-codeblock</span><span class=\"token punctuation\">:</span> #e6edf3<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--bgcolor-prismjs-codeblock</span><span class=\"token punctuation\">:</span> #161b22<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--color-prismjs-inlinecode</span><span class=\"token punctuation\">:</span> #e6edf3<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">--bgcolor-prismjs-inlinecode</span><span class=\"token punctuation\">:</span><span class=\"token function\">rgba</span><span class=\"token punctuation\">(</span>110<span class=\"token punctuation\">,</span> 118<span class=\"token punctuation\">,</span> 129<span class=\"token punctuation\">,</span> 0.4<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  ...\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>구체적인 설정값은 직접 <a href=\"https://github.com/10cheon00/10cheon00.github.io\">리포지토리</a>에서 볼 수 있다.</p>\n<h2 id=\"utterances\" style=\"position:relative;\"><a href=\"#utterances\" aria-label=\"utterances permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>utterances</h2>\n<p>블로그에 utterances를 적용하여 issue를 댓글처럼 활용하도록 했다. 그런데 utterances는 iframe을 이용하기 때문에 css를 변경하는 방법을 사용할 수 없다.</p>\n<p>그래서 iframe의 window로 <code class=\"language-text\">postMessage</code>를 날리는 방법밖에 없다.</p>\n<p><a href=\"https://github.com/utterance/utterances/issues/170#issuecomment-504716232\">Dynamically change theme? · Issue #170 · utterance/utterances | Github</a></p>\n<p>여기저기 찾아보다가 이 방법을 시도하니 바로 적용이 되었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// src/components/theme-toggler.js</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ThemeToggler <span class=\"token keyword\">as</span> DarkModeThemeToggler <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby-plugin-dark-mode\"</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">ThemeToggler</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">changeUtteranceTheme</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> utterancesEl <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".utterances-frame\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>utterancesEl<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> theme <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span>body<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"dark\"</span><span class=\"token punctuation\">)</span>\n          <span class=\"token operator\">?</span> <span class=\"token string\">\"github-dark\"</span>\n          <span class=\"token operator\">:</span> <span class=\"token string\">\"github-light\"</span>\n        <span class=\"token keyword\">const</span> message <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token string\">\"set-theme\"</span><span class=\"token punctuation\">,</span>\n          <span class=\"token literal-property property\">theme</span><span class=\"token operator\">:</span> theme<span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">}</span>\n        utterancesEl<span class=\"token punctuation\">.</span>contentWindow<span class=\"token punctuation\">.</span><span class=\"token function\">postMessage</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token string\">\"https://utteranc.es\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">DarkModeThemeToggler</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> theme<span class=\"token punctuation\">,</span> toggleTheme <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>label</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>theme-toggler<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\n              <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>checkbox<span class=\"token punctuation\">\"</span></span>\n              <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                <span class=\"token function\">toggleTheme</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>checked <span class=\"token operator\">?</span> <span class=\"token string\">\"dark\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"light\"</span><span class=\"token punctuation\">)</span>\n                <span class=\"token function\">changeUtteranceTheme</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n              <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n              <span class=\"token attr-name\">checked</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>theme <span class=\"token operator\">===</span> <span class=\"token string\">\"dark\"</span><span class=\"token punctuation\">}</span></span>\n            <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">{</span><span class=\"token string\">\" \"</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n            </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Dark mode</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n          </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>label</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">DarkModeThemeToggler</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token punctuation\">{</span> ThemeToggler <span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p><code class=\"language-text\">theme-toggler.js</code>에서 <code class=\"language-text\">onChange</code>가 일어난 후에 추가로 utterances의 테마를 변경하는 함수를 실행하도록 했다. body의 class를 확인하여 변경된 테마의 색에 따라 요청을 넣도록 했다.</p>","frontmatter":{"title":"Gatsby Theme Toggler 만들기","date":"September 08, 2023","description":null,"tags":["gatsby","blog","react"]}},"previous":{"fields":{"slug":"/csharp/Csharp의-키워드/"},"frontmatter":{"title":"Csharp의 키워드"}},"next":null},"pageContext":{"id":"769a3f61-9512-50a7-b6c8-da5f504470d5","previousPostId":"c68ca5f6-215e-5a6b-b064-467c93e8ab06","nextPostId":null}},"staticQueryHashes":["230163734","3589320610"],"slicesMap":{}}