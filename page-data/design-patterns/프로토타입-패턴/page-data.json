{"componentChunkName":"component---src-templates-blog-post-js","path":"/design-patterns/프로토타입-패턴/","result":{"data":{"site":{"siteMetadata":{"title":"10cheon00의 Archive"}},"markdownRemark":{"id":"3fb324fa-b139-5032-b201-b6f0fc58569b","excerpt":"의도 프로토타입이 되는 인스턴스를 사용하여 생성할 객체의 종류를 명시하고, 이렇게 만든 견본을 복사하여 새로운 객체를 생성한다. UML…","html":"<h1 id=\"의도\" style=\"position:relative;\"><a href=\"#%EC%9D%98%EB%8F%84\" aria-label=\"의도 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>의도</h1>\n<p>프로토타입이 되는 인스턴스를 사용하여 생성할 객체의 종류를 명시하고, 이렇게 만든 견본을 복사하여 새로운 객체를 생성한다.</p>\n<h1 id=\"uml\" style=\"position:relative;\"><a href=\"#uml\" aria-label=\"uml permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>UML</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c86fa91560c638d82a147c8bf390699a/bf433/image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.30379746835443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABUElEQVR42oVSa6uCQBT0//+hPihEfRAhFSstwjBJK1+o0fs5lzmXvRjcy11Y1l1n58zMWQ0A3u83xuMxhsMh8jxHmqawbRuTyQSHwwHH4xGn0wlt28JxHOi6jsFggCRJcD6foTg4NH48n09EUQTf97FcLoX0crkIgP8ej4fM+/2OOI6lUFVVQsZCH4RqQ/DtdhOAIlOg7iBuv9+L2uv1itfr9fFfK4oCnFTVNI2s0+lULnZJqZCKWJRkjIUYFifxDyEtzmYzuK6L+XyOIAjEvgIxQ9rbbDZYr9eykpBEu91OxKxWK2y3W2RZBq0ruWtRnTOzXq8nTbAsC6ZpCjGVsomGYcjZaDRCv9//zvC3vNS+rmuEYSjK2CDaZM5cqYwOqVhhNfwzmBtzpaWyLCWOxWIhDlT2tMqCnuf9TagUslF8JsyYF/heqYwZc6/OOJn/F7qDp/D/aQj5AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alt text\"\n        title=\"\"\n        src=\"/static/c86fa91560c638d82a147c8bf390699a/f058b/image.png\"\n        srcset=\"/static/c86fa91560c638d82a147c8bf390699a/c26ae/image.png 158w,\n/static/c86fa91560c638d82a147c8bf390699a/6bdcf/image.png 315w,\n/static/c86fa91560c638d82a147c8bf390699a/f058b/image.png 630w,\n/static/c86fa91560c638d82a147c8bf390699a/40601/image.png 945w,\n/static/c86fa91560c638d82a147c8bf390699a/bf433/image.png 971w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>프로토타입을 관리하는 클래스(<code class=\"language-text\">Client</code>)는 각 프로토타입을 알고 있어야 한다. 객체 생성 요청이 들어올 때 각 프로토타입을 복제하여 생성 과정을 진행하기 때문이다.</p>\n<p>각 프로토타입들은 <strong>자기 자신을 복제하는 메서드를 필수로 구현해야한다</strong>.</p>\n<p>사용자가 Client에게 객체를 생성해달라는 요청을 하게 되면 Client는 각 프로토타입들을 복제하여 생성 과정을 진행한다.</p>\n<h1 id=\"사용-시기\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9-%EC%8B%9C%EA%B8%B0\" aria-label=\"사용 시기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>사용 시기</h1>\n<ul>\n<li>인스턴스화할 클래스를 런타임에 지정하고 싶을 때</li>\n<li><em>병렬 클래스 구조</em>를 일으키는 팩토리 메서드를 사용하고 싶지 않을 때</li>\n</ul>\n<h1 id=\"장점\" style=\"position:relative;\"><a href=\"#%EC%9E%A5%EC%A0%90\" aria-label=\"장점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>장점</h1>\n<p>팩토리 메서드에서는 객체를 생성하기 위해 팩토리 클래스가 병렬로 연결되어야 하지만, 프로토타입 패턴에서는 <strong>등록된 인스턴스를 복제해달라고 요청하기만</strong> 하면 되므로 서브 클래스의 수가 줄어든다.</p>\n<p>객체를 생성할 때 객체 내에서 동일한 인스턴스를 생성하기 위해 많은 비용이 필요하다면 프로토타입 패턴으로 <strong>비용을 절감</strong>할 수 있다.</p>\n<h1 id=\"단점\" style=\"position:relative;\"><a href=\"#%EB%8B%A8%EC%A0%90\" aria-label=\"단점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>단점</h1>\n<p>프로토타입의 서브 클래스가 무조건 <code class=\"language-text\">clone</code> 메서드를 구현해야한다. 만약 서브 클래스를 수정할 수 없는 상황이라면 이 패턴을 적용하기 힘들다.</p>\n<h1 id=\"구현\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84\" aria-label=\"구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>구현</h1>\n<p>자동차를 생성해야하는데, 부품들을 생성하기 위해서는 많은 비용과 시간이 든다고 하자.</p>\n<p>이런 경우에는 각 부품(프로토타입)들을 미리 생성해둔다음 단순히 사본을 찍어 낸다면 불필요한 요청을 하지 않아 비용을 줄일 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CarPrototypeFactory</span> <span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n    <span class=\"token function\">CarPrototypeFactory</span><span class=\"token punctuation\">(</span>CarFrame<span class=\"token operator\">*</span> cf<span class=\"token punctuation\">,</span> Tire<span class=\"token operator\">*</span> t<span class=\"token punctuation\">,</span> CarGlass <span class=\"token operator\">*</span>cg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        _protoCarFrame <span class=\"token operator\">=</span> cf<span class=\"token punctuation\">;</span>\n        _protoTire <span class=\"token operator\">=</span> t<span class=\"token punctuation\">;</span>\n        _protoCarGlass <span class=\"token operator\">=</span> cg<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">virtual</span> CarComponent<span class=\"token operator\">*</span> <span class=\"token function\">MakeCarFrame</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">virtual</span> CarComponent<span class=\"token operator\">*</span> <span class=\"token function\">MakeTire</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">virtual</span> CarComponent<span class=\"token operator\">*</span> <span class=\"token function\">MakeCarGlass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">private</span><span class=\"token operator\">:</span>\n    <span class=\"token comment\">// 프로토타입들</span>\n    CarFrame<span class=\"token operator\">*</span> _protoCarFrame<span class=\"token punctuation\">;</span>\n    Tire<span class=\"token operator\">*</span> _protoTire<span class=\"token punctuation\">;</span>\n    CarGlass<span class=\"token operator\">*</span> _protoCarGlass<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>자동차의 프로토타입을 제공하는 클래스를 만든다.</p>\n<p>이 클래스의 생성자를 통해 각 부품(프로토타입)을 등록한다. 메서드에는 프로토타입을 복제하는 연산을 실행한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// in CarPrototypeFactory class</span>\n\nCarFrame<span class=\"token operator\">*</span> <span class=\"token class-name\">CarPrototypeFactory</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">MakeCarFrame</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> _protoCarFrame<span class=\"token operator\">-></span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nTire<span class=\"token operator\">*</span> <span class=\"token class-name\">CarPrototypeFactory</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">MakeTire</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> _protoTire<span class=\"token operator\">-></span><span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 부품들을 복제하는 메서드들을 구현한다.</span>\n<span class=\"token comment\">// ...</span></code></pre></div>\n<p>복제될 부품(프로토타입)들은 모두 <code class=\"language-text\">clone</code>을 구현해야한다. 인터페이스를 통해 복제하는 메서드를 제공한다면 그 메서드를 구현하도록 강제할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CarComponent</span> <span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">virtual</span> CarComponent <span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">CarFrame</span> <span class=\"token operator\">:</span> <span class=\"token base-clause\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">CarComponent</span></span> <span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n    <span class=\"token function\">CarFrame</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">CarFrame</span><span class=\"token punctuation\">(</span>CarFrame<span class=\"token operator\">&amp;</span> cf<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 복제를 위해 필수적으로 복사하는 메서드를 구현해야한다.</span>\n        <span class=\"token comment\">// C++에는 복사 생성자가 있기 때문에,</span>\n        <span class=\"token comment\">// 자기 자신(프로토타입)을 그대로 복사 생성자의 인자로 넘겨</span>\n        <span class=\"token comment\">// 간단히 복제할 수 있다.</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">virtual</span> CarComponent<span class=\"token operator\">*</span> <span class=\"token function\">clone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token function\">CarFrame</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>사용자는 등록된 프로토타입을 복제하여 새로운 인스턴스를 생성할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">CarPrototypeFactory <span class=\"token function\">newCarFactory</span><span class=\"token punctuation\">(</span>\n    <span class=\"token keyword\">new</span> <span class=\"token function\">CarFrame</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n    <span class=\"token keyword\">new</span> <span class=\"token function\">Tire</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n    <span class=\"token keyword\">new</span> <span class=\"token function\">CarGlass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// 각 부품을 복제하여 새로운 자동차 생성</span>\nCar<span class=\"token operator\">*</span> car <span class=\"token operator\">=</span> <span class=\"token function\">MakeCar</span><span class=\"token punctuation\">(</span>newCarFactory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> </code></pre></div>\n<p>이렇게 등록된 프로토타입들의 인스턴스를 복제함으로 새로운 객체를 생성할 수 있다.</p>\n<p>만약 복사 생성자만으로 초기화하는 것이 부족하다면 별도의 초기화 함수를 정의한 후, <code class=\"language-text\">clone</code> 메서드 안에서 복제된 인스턴스의 초기화 함수를 호출하면 된다.</p>","frontmatter":{"title":"프로토타입 패턴","date":"July 21, 2023","description":null,"tags":["design-pattern"]}},"previous":{"fields":{"slug":"/design-patterns/팩토리-메서드-패턴/"},"frontmatter":{"title":"팩토리 메서드 패턴"}},"next":{"fields":{"slug":"/design-patterns/싱글턴-패턴/"},"frontmatter":{"title":"싱글턴 패턴"}}},"pageContext":{"id":"3fb324fa-b139-5032-b201-b6f0fc58569b","previousPostId":"36f924f3-74c8-586f-aa1f-7eba8a34d173","nextPostId":"8cfc3856-d399-55ed-aed7-aed1f91954e0"}},"staticQueryHashes":["230163734","3589320610"],"slicesMap":{}}