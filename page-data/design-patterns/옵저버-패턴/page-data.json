{"componentChunkName":"component---src-templates-blog-post-js","path":"/design-patterns/옵저버-패턴/","result":{"data":{"site":{"siteMetadata":{"title":"10cheon00의 Archive"}},"markdownRemark":{"id":"00c82480-9188-54f0-9c88-cbedb7eb10c9","excerpt":"의도 객체 사이에 일 대 다 관계를 정의하여 어떤 객체의 상태가 변했을 때 모든 객체가 자동으로 그 변화를 통지받아 갱신되도록 만든다. UML  Subject는 여러 Observer…","html":"<h1 id=\"의도\" style=\"position:relative;\"><a href=\"#%EC%9D%98%EB%8F%84\" aria-label=\"의도 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>의도</h1>\n<p>객체 사이에 일 대 다 관계를 정의하여 어떤 객체의 상태가 변했을 때 모든 객체가 자동으로 그 변화를 통지받아 갱신되도록 만든다.</p>\n<h1 id=\"uml\" style=\"position:relative;\"><a href=\"#uml\" aria-label=\"uml permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>UML</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b7a8a01234d833bc63c6208596088c2c/dc61a/image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36.708860759493675%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABJUlEQVR42nWR246CYAyE//d/KeIhEQ8oFyiGIKBGAeVMQEV0NtPEvdm1SUMoX9vpoCaTCZbLJcIwhOd5cF0XZVmi73vc73fJtm1RVZVwmqYJ83q98F+o0WiE4XCI+XyOw+GAy+WC/X4Px3FwPB6x3W7xfD4F5vtsNkMURX8Gvt9vSWXbNnzfR57nMoxDqcA0TVGdJAm6rvtt4jCq/xaKEBuzLBPw8XiIIipg8uTb7SbLuJyXrFYrGVwUhQhhL22hMGUYhpwxHo+x2WwEIsBM0xR1XWO328npuq7DsiycTiexJQgCsWswGGC9XmM6nUIR4kCaHsexbGEDYS7jyQwqoRVcer1ehW+aRp78iayRUZS/WCxwPp+lwI+fJPwx/2M6g7VvPv4A76gLGPKyfYEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alt text\"\n        title=\"\"\n        src=\"/static/b7a8a01234d833bc63c6208596088c2c/f058b/image.png\"\n        srcset=\"/static/b7a8a01234d833bc63c6208596088c2c/c26ae/image.png 158w,\n/static/b7a8a01234d833bc63c6208596088c2c/6bdcf/image.png 315w,\n/static/b7a8a01234d833bc63c6208596088c2c/f058b/image.png 630w,\n/static/b7a8a01234d833bc63c6208596088c2c/40601/image.png 945w,\n/static/b7a8a01234d833bc63c6208596088c2c/dc61a/image.png 1147w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Subject는 여러 Observer들을 등록, 분리하는 메서드를 제공한다. <code class=\"language-text\">Notify()</code>를 통해 상태가 변경되었으므로 자신에게 등록된 모든 Observer들에게 상태를 갱신하라고 요청한다.</p>\n<p>Observer는 Subject의 상태가 변경되었을 때 실행할 행동인 <code class=\"language-text\">Update()</code>를 정의한다.</p>\n<p>Subject를 상속한 ConcreteSubject는 구체적인 상태를 갖고 있는데, 그 상태를 반환 및 수정하는 메서드(<code class=\"language-text\">GetState()</code>, <code class=\"language-text\">SetState()</code>)를 제공한다.</p>\n<p>Observer를 상속한 ConcreteObserver는 ConcreteSubject의 상태와 동일한 타입의 변수(<code class=\"language-text\">observerState</code>)를 갖는다. 그리고 <code class=\"language-text\">subject</code>를 참조자로 갖는데, Subject로부터 <code class=\"language-text\">Update()</code>가 호출될 경우 자신이 갖고 있는 <code class=\"language-text\">subject</code> 참조자를 통해 Subject의 상태를 받아와 업데이트하게 된다.</p>\n<h1 id=\"사용-흐름\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9-%ED%9D%90%EB%A6%84\" aria-label=\"사용 흐름 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>사용 흐름</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4ed7fc8d293ca774262175e43df35506/0b6f4/image-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.56962025316456%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABIElEQVR42o2S2Y6CAAxF+f8v8xkDKigQIRBReGBVQDo5TTqjYyaZmzQsbW9vFycMQ4miSDzPU7terwKmaZLT6SRBEIjrunI4HCRJElnXVS6Xi+z3e4njWI7Ho+x2O43j2yH5+XxKURSyLIvc73fp+17NgtM0Vd8rIAbEUdzg4MBI9n1fuq7TAhA8Hg8NzvNcCxkRRgxo21bjzOfYCy1ASju/1VDkL4zjKPM8/yg0wvP5rArrun5TAG6323eL/yZkTqhrmkbbwFjYZrPRhbzO6XWGqH+boTlJZlNlWcowDBrIxvlmhpaEcpujEX4oBLQMaVVV2gakPDGIUcxGeeLLsky2262e2odCqnKLbNJIqEwiJIzCTsn+UZi7ZFR2ARB+AWXWtAKNIPPLAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alt text\"\n        title=\"\"\n        src=\"/static/4ed7fc8d293ca774262175e43df35506/f058b/image-1.png\"\n        srcset=\"/static/4ed7fc8d293ca774262175e43df35506/c26ae/image-1.png 158w,\n/static/4ed7fc8d293ca774262175e43df35506/6bdcf/image-1.png 315w,\n/static/4ed7fc8d293ca774262175e43df35506/f058b/image-1.png 630w,\n/static/4ed7fc8d293ca774262175e43df35506/40601/image-1.png 945w,\n/static/4ed7fc8d293ca774262175e43df35506/0b6f4/image-1.png 984w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Observer들이 모두 Subject에 결합되어 있을 때 실제 흐름은 이렇다.</p>\n<p>먼저 Observer가 <code class=\"language-text\">SetState()</code>를 통해 Subject의 상태를 변경한다. (또는 다른 요인에 의해 변경될 수 있다.)</p>\n<p>Subject는 상태가 변경되었으므로 모든 Observer에게 <code class=\"language-text\">Update()</code>를 호출한다.</p>\n<p>Observer의 Update에는 Subject의 상태를 받아와 자신의 상태를 갱신하는 작업을 진행하므로 <code class=\"language-text\">GetState()</code>를 통해 자신의 상태를 갱신한다.</p>\n<h1 id=\"사용-시기\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9-%EC%8B%9C%EA%B8%B0\" aria-label=\"사용 시기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>사용 시기</h1>\n<ul>\n<li>한 객체에 가해진 변경으로 다른 객체를 변경해야 하지만 얼마나 많은 객체들이 변경되어야 할지 몰라도 될 때</li>\n<li><strong>어떤 객체가 다른 객체에게 자신의 변화를 통보하되</strong> 누가 통보받는지 모른다 하더라도 통보가 될 때</li>\n</ul>\n<h1 id=\"장점\" style=\"position:relative;\"><a href=\"#%EC%9E%A5%EC%A0%90\" aria-label=\"장점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>장점</h1>\n<p>종속적인 관계를 Subject와 Observer로 나눠 <em>추상적인 결합도</em>만 가지게 만든다.</p>\n<p>상태 변화 사실을 전달할 구체적인 Observer를 몰라도 된다. 대신 모든 Observer들에게 전달한다.</p>\n<h1 id=\"단점\" style=\"position:relative;\"><a href=\"#%EB%8B%A8%EC%A0%90\" aria-label=\"단점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>단점</h1>\n<p>상태를 변경하는 도중에 <em>여러 번의 불필요한 갱신</em>이 일어날 수 있다.</p>\n<p>구체적으로 Subject의 <strong>어떤 상태가 변했는 지에 대한 추적이 어렵다</strong>.</p>\n<h1 id=\"notify의-호출-시기\" style=\"position:relative;\"><a href=\"#notify%EC%9D%98-%ED%98%B8%EC%B6%9C-%EC%8B%9C%EA%B8%B0\" aria-label=\"notify의 호출 시기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>Notify의 호출 시기</h1>\n<p>상태가 변경되었다는 사실을 알리기 위해서는 <strong>1. 상태를 변경하는 연산의 마지막에 <code class=\"language-text\">Notify()</code>를 호출</strong>하도록 할 수 있고, <strong>2. 사용자가 직접 <code class=\"language-text\">Notify()</code>를 호출하여 필요할 때 상태를 갱신</strong>하도록 할 수 있다.</p>\n<p>전자의 경우 사용자가 <code class=\"language-text\">Notify()</code>를 직접 호출하지 않아도 되지만, <strong>불필요한 호출이 여러 번 반복될 수 있다</strong>.</p>\n<p>후자의 경우 불필요한 호출에 대한 책임은 사용자가 갖게 되어 비용이 줄어들게 되지만, <strong>사용자가 갱신에 대한 책임을 지게 되므로</strong> 만약 <code class=\"language-text\">Notify()</code>를 호출하지 않으면 오류가 일어날 가능성이 높다.</p>\n<h1 id=\"구현\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84\" aria-label=\"구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>구현</h1>\n<p>공유된 문서를 수정한다고 가정하자. 실제 문서가 저장되어있는 서버와 클라이언트 간 결합도를 낮추기 위해 옵저버 패턴을 적용하자.</p>\n<p>추상 클래스를 정의한다.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Subject</span> <span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">Attach</span><span class=\"token punctuation\">(</span>Observer<span class=\"token operator\">*</span> observer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 추가하는 연산</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">Detach</span><span class=\"token punctuation\">(</span>Observer<span class=\"token operator\">*</span> observer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 지우는 연산</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">Notify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">auto</span> observer <span class=\"token operator\">=</span> _observerList<span class=\"token operator\">-></span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n            observer <span class=\"token operator\">!=</span> _observerList<span class=\"token operator\">-></span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n            <span class=\"token operator\">++</span>observer<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            observer<span class=\"token operator\">-></span><span class=\"token function\">Update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">private</span><span class=\"token operator\">:</span>\n    std<span class=\"token double-colon punctuation\">::</span>list<span class=\"token operator\">&lt;</span>Observer<span class=\"token operator\">*</span><span class=\"token operator\">></span> _observerList<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Observer</span> <span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">Update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>문서를 관리하는 서버 역할을 담당할 Subject와 클라이언트를 담당할 Observer를 만든다.</p>\n\n          <div class=\"gatsby-remark-prismjs-copy-button-container\">\n            <div class=\"gatsby-remark-prismjs-copy-button\" tabindex=\"0\" role=\"button\" aria-pressed=\"false\" onclick=\"gatsbyRemarkCopyToClipboard(this, this.parentNode.nextElementSibling)\">\n              Copy\n            </div>\n          </div>\n          \n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Server</span> <span class=\"token operator\">:</span> <span class=\"token base-clause\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">Subject</span></span> <span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n    Document <span class=\"token function\">GetDocument</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> _doc<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">SetDocument</span><span class=\"token punctuation\">(</span>Document doc<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n         _doc <span class=\"token operator\">=</span> doc<span class=\"token punctuation\">;</span>\n\n        <span class=\"token function\">Notify</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 서버가 Notify를 호출할 책임을 가지게 했다.</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">private</span><span class=\"token operator\">:</span>\n    Document document<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Client</span> <span class=\"token operator\">:</span> <span class=\"token base-clause\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">Observer</span></span> <span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n    <span class=\"token function\">Client</span><span class=\"token punctuation\">(</span>Subject<span class=\"token operator\">*</span> subject<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">_subject</span><span class=\"token punctuation\">(</span>subject<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">void</span> <span class=\"token function\">Update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        _doc <span class=\"token operator\">=</span> _subject<span class=\"token operator\">-></span><span class=\"token function\">GetDocument</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">private</span><span class=\"token operator\">:</span>\n    Subject<span class=\"token operator\">*</span> _subject<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>클라이언트에 의해서 또는 외부 객체에 의해서 <code class=\"language-text\">SetDocument()</code>가 호출되었을 경우 서버 내의 Document가 변하게 되고 서버가 <code class=\"language-text\">Notify()</code>를 호출할 책임을 갖게 설계되었으므로 자동으로 모든 클라이언트가 변경을 수신하게 된다.</p>","frontmatter":{"title":"옵저버 패턴","date":"August 08, 2023","description":null,"tags":["design-pattern"]},"tableOfContents":"<ul>\n<li><a href=\"#%EC%9D%98%EB%8F%84\">의도</a></li>\n<li><a href=\"#uml\">UML</a></li>\n<li><a href=\"#%EC%82%AC%EC%9A%A9-%ED%9D%90%EB%A6%84\">사용 흐름</a></li>\n<li><a href=\"#%EC%82%AC%EC%9A%A9-%EC%8B%9C%EA%B8%B0\">사용 시기</a></li>\n<li><a href=\"#%EC%9E%A5%EC%A0%90\">장점</a></li>\n<li><a href=\"#%EB%8B%A8%EC%A0%90\">단점</a></li>\n<li><a href=\"#notify%EC%9D%98-%ED%98%B8%EC%B6%9C-%EC%8B%9C%EA%B8%B0\">Notify의 호출 시기</a></li>\n<li><a href=\"#%EA%B5%AC%ED%98%84\">구현</a></li>\n</ul>"},"previous":{"fields":{"slug":"/design-patterns/메멘토-패턴/"},"frontmatter":{"title":"메멘토 패턴","date":"August 07, 2023"}},"next":{"fields":{"slug":"/design-patterns/상태-패턴/"},"frontmatter":{"title":"상태 패턴","date":"August 09, 2023"}}},"pageContext":{"id":"00c82480-9188-54f0-9c88-cbedb7eb10c9","previousPostId":"255d3c31-0a85-5cbe-8d8c-d935b758799d","nextPostId":"d780ce4c-c3e2-5b50-b3d2-28e546f8bc4a"}},"staticQueryHashes":["230163734","3589320610"],"slicesMap":{}}