{"componentChunkName":"component---src-templates-blog-post-js","path":"/haleygg-사이트-제작기/","result":{"data":{"site":{"siteMetadata":{"title":"10cheon00의 Archive"}},"markdownRemark":{"id":"cd1678ca-c190-5e9b-a010-5278368d13e6","excerpt":"동기 Haley…","html":"<h1 id=\"동기\" style=\"position:relative;\"><a href=\"#%EB%8F%99%EA%B8%B0\" aria-label=\"동기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>동기</h1>\n<p>Haley클랜(이하 할리클랜)에 가입하여 맵퍼로 활동을 하다가, 카페 내에서 <strong>전적검색기</strong>를 스프레드시트로 관리하는 것을 보았다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a85d23b750cb756bada45699d46081fd/e4ee8/Untitled.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.36708860759494%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB3UlEQVR42mWSWU/bQBRG/f9/TB/6ggpFrahUsrBWQBIIScAOGTu2Y4+X8TLjU42BKGofPn33Sldn7jIOQN3U+MLDc5fk+Q6ZhnRdR9u2KFUSRT5ZlpCmIWUhUWWKMZpgG7JazXG9BXWtLApHSkmShETRE0I84Hm3zGYDlCooipIwDCiVoKoi8txDKUHTCHZxxNPkHnd1i7sasH6dEAU+ThAEzOdzhAjYbHyWyxXTyYxKFSSxZONuKcuKVMq+gyzLyfOSeOvz5/wHd8NfTC4HPN2MOPv2FSeTOZ67JkkkdV0T+AHuq0ddV2SZYv0W0zQarTVdZ2iaBq1bkl3M4/0tz9M7XhePvDxPuR6f4wjxiLd+wHoQzHu3iuMlqspoDDTa9DC7V6N136lMd0xvRqRx1OfaGIzpcNp2AN0FXTemYwxc0LZD0vQEVbp9sT2AMe9A/QHcRSFXv38S+pt9jX3U0XrUQ7Qe0jTDj3hEkpxSFC5dRz+iBVnop6tKkSQJSqn9Q1aOMSOaZoDvH7P2jqjrc4wZE/hHZPKlB9rv8y/wfafdPt4Dtb4AroGrD79G60ukPEOpt/9Htrs66OgQbOUIccx2+32vMDxFiBMWiy/E8TPG0F/fXtd2euifOsz/AqXS9+GFHOEqAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled\"\n        title=\"\"\n        src=\"/static/a85d23b750cb756bada45699d46081fd/f058b/Untitled.png\"\n        srcset=\"/static/a85d23b750cb756bada45699d46081fd/c26ae/Untitled.png 158w,\n/static/a85d23b750cb756bada45699d46081fd/6bdcf/Untitled.png 315w,\n/static/a85d23b750cb756bada45699d46081fd/f058b/Untitled.png 630w,\n/static/a85d23b750cb756bada45699d46081fd/40601/Untitled.png 945w,\n/static/a85d23b750cb756bada45699d46081fd/78612/Untitled.png 1260w,\n/static/a85d23b750cb756bada45699d46081fd/e4ee8/Untitled.png 1496w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>클랜원끼리 경기를 치르면 전적이 생긴다. 이 전적들을 모아서 통계를 볼 수 있게 만들어져 있었는데, 관리 도구가 스프레드시트이다보니 불편한 점이 여러가지 있었다.</p>\n<p>디자인부터 마음에 안들었다. 그리고 스프레드시트를 열어야 하니 접근성이 떨어졌다. 플레이어의 전체 통계와 승률을 볼 수 있었지만, 특정 리그에서의 전적을 보기 불편하다는 점도 있었다.</p>\n<p>군대에서 친구를 통해 <strong>Django</strong>를 접하게 되었고, 웹 서비스에 대해 천천히 알아가면서 이 불편한 점을 고쳐보자는 생각을 갖게 되었다. 전역 후 제대로 시작해보자는 마음에 21년 9월부터 개발을 시작했다.</p>\n<h1 id=\"무작정-시작하기-21년-9월\" style=\"position:relative;\"><a href=\"#%EB%AC%B4%EC%9E%91%EC%A0%95-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0-21%EB%85%84-9%EC%9B%94\" aria-label=\"무작정 시작하기 21년 9월 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>무작정 시작하기 (21년 9월)</h1>\n<p>배운거라고는 유튜브에서 <strong>Django</strong> 튜토리얼과 <strong>DRF</strong> 튜토리얼 영상을 보면서 따라해본 것과 공식 문서를 훑어본 것, 그리고 <strong>VueJs</strong> 튜토리얼을 따라한 것밖에 없었다. 머릿속으로는 어떻게 만들면 되겠다가 간단하게만 정리되어 있었다.</p>\n<p>개인 프로젝트는 이번이 처음이었고, 계획도 제대로 수립하지 않은 상태로 진행했으니 결과는 제대로 나오지 않았다. 간단하다고 생각한 기능들이 실제로는 고려할 점이 많았다.</p>\n<h2 id=\"server-잘못된-모델-설계\" style=\"position:relative;\"><a href=\"#server-%EC%9E%98%EB%AA%BB%EB%90%9C-%EB%AA%A8%EB%8D%B8-%EC%84%A4%EA%B3%84\" aria-label=\"server 잘못된 모델 설계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>(Server) 잘못된 모델 설계</h2>\n<p>우선 다뤄야할 데이터를 모델로 구현하는 것부터 난관이었다.</p>\n<p>한 경기에 담겨있는 정보는 다음과 같다.</p>\n<ul>\n<li>경기 날짜</li>\n<li>리그</li>\n<li>맵</li>\n<li>게임 제목</li>\n<li><strong>플레이어 목록</strong> (2~n, 2보다 많을경우 팀플 경기를 의미)\n<ul>\n<li>플레이어</li>\n<li>플레이어의 <strong>종족</strong></li>\n</ul>\n</li>\n</ul>\n<p>리그, 맵은 모델을 분리하여 관계를 설정하면 되지만, <strong>플레이어 목록</strong>이 문제였다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Model structure MK1</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Profile</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    name <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    signup_date <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>DateField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Player</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    profile <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ForeignKey<span class=\"token punctuation\">(</span>Profile<span class=\"token punctuation\">,</span> on_delete<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CASCADE<span class=\"token punctuation\">)</span>\n    race <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Match</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># miscellaneous fields... (league, map, title, date, etc.)</span>\n\n    winners <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ManyToManyField<span class=\"token punctuation\">(</span>Player<span class=\"token punctuation\">)</span>\n    losers <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ManyToManyField<span class=\"token punctuation\">(</span>Player<span class=\"token punctuation\">)</span></code></pre></div>\n<p>경기에 이긴 사람과 진 사람을 나누어 <strong>ManyToMany</strong>로 연결했다.</p>\n<p><strong>Player</strong> 모델은 <strong>Profile</strong> 모델과 종족 필드를 갖는다.</p>\n<p><strong>Profile</strong> 모델은 플레이어의 기본적인 정보를 담고 있다.</p>\n<p>이 구조를 그림으로 표현하면 이렇다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/af4f3227639e033033e1a44008feaff3/5a46d/Untitled-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.45569620253164%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAABVUlEQVR42o2SQY/jIAyF+///Uo899dSVqpZKoQdQSAt1AwqOCSEho0lGM+lqdtXvhqznZ5u3mX4j5zz9m+/qZnqDvu+FEIfD4Xg87vf72+22tNis+8UYiSjG2HXdNE3jOC4m1trHTFVVUsoQwo9zSklrjYic8+12yxg7n88xRgAwxuScnXNFUfyZ2e12L84AQETLexiGcWbxbJrGz4QQxnFERCJ62bmu6xij1loIIaW83+/e+7ZtnXPP57MsSwDo+/73gznniEhrbYzRWltrich7j4jW2qqquq7LM+uhvsQA0Lbt4/HQWgOAcy7GiIghBGOMUqqu67XzN59iIjLG4IplbEQ0xgzD0DSNEKIoCiEE59w59/JVKaUQQvdKCCGltOwFAEqpy+XCGEPEH/F/8rSUvPdKKc55WZbX63VxfjdhOWdrrZSSMXY6nbz3fyfszS7rg30AZZvtL9i3FlsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled-1.png\"\n        title=\"\"\n        src=\"/static/af4f3227639e033033e1a44008feaff3/5a46d/Untitled-1.png\"\n        srcset=\"/static/af4f3227639e033033e1a44008feaff3/c26ae/Untitled-1.png 158w,\n/static/af4f3227639e033033e1a44008feaff3/5a46d/Untitled-1.png 300w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>플레이어의 종족은 <strong>매 경기마다 달라질 수 있기 때문에</strong> Player 모델을 만들어 플레이어를 구분하기 위한 Profile 모델과 종족을 연결지어 놓았다. 그리고 Match 모델에 연결시켰는데, 누가 승자이고 패자인지 직관적으로 구분할 수 있게 <strong>winners</strong> 필드와 <strong>losers</strong> 필드를 만들어 두었다.</p>\n<p>이상하게도, Player 모델 관리를 특이하게 했었다.</p>\n<p>Player는 테란, 프로토스, 저그 중 1개의 종족을 갖게 된다. 따라서 각 종족별로, 총 3개의 Player 인스턴스를 미리 만들어 두고, 경기 결과를 저장할 때 <em>미리 만들어둔 인스턴스 중 맞는 종족값을 가진 인스턴스</em>를 연결시켰다.</p>\n<p>이렇게 만든 모델을 이용해 개발하다가 통계를 내는 쿼리를 짜기 복잡하다는 것을 깨닫고 모델 구조를 단순하게 만들어야 한다는 것을 깨달았다. 게다가, 이해하기 복잡하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Model structure MK2</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Profile</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    name <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    signup_date <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>DateField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Match</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># miscellaneous fields... (league, map, title, date, etc.)</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Player</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    profile <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ForeignKey<span class=\"token punctuation\">(</span>Profile<span class=\"token punctuation\">,</span> on_delete<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CASCADE<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">match</span> <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ForeignKey<span class=\"token punctuation\">(</span>Match<span class=\"token punctuation\">,</span> on_delete<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CASCADE<span class=\"token punctuation\">)</span>\n    opponent <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ForeignKey<span class=\"token punctuation\">(</span><span class=\"token string\">\"self\"</span><span class=\"token punctuation\">,</span> on_delete<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CASCADE<span class=\"token punctuation\">,</span> null<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n    win_state <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>BooleanField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    race <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>winners, losers 필드를 제거하고, Player 모델에 Match 모델을 연결시킴으로 관계를 단순화했다.</p>\n<p>그리고 상대가 누군지 알아야할 필요성이 생겨 opponent 필드를 추가해 관계를 구성했다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bf29101fba2fcc8bdc00f23e6ca95d68/5a46d/Untitled-1-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.45569620253164%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAABWElEQVR42qWSYU+DMBRF9/9/2DaTuZmOBHR0gFDYKH0FWksoo88MzNRF4wfPp5eXnPS2vQv8Bfed2waneWaB/+Bnue/7NE0ZY+fzuaoqpRTnnDHGq8rVNRrzTb4FQ0SllBAiSZLdbkcIOZ1OAOB5XuD7NI5dmuLzM3bd/cmzDACcc0rpy0Se5wAQRdGR0uT1dawqjGPM86s8DENRFKcJrbW1tixLrXVd15TS4/HYNI1SKkkSxlheFK5pMMswCK7y5XLZ7/fb7dbzPCGEMSbLsq7rmqbRWncT1tp2ojOm63vkHMPw59hSSs55GIYPE3EcA8DhcHjcbHaEFIQgpdfYzi3uvnS+8/xmZVlKKdu2NcYIIQBASvnWtjgMyNiHfIe1FgCCIFgul6vVKooiAPB9f71eb56eckLQ97Eo/iiJc24cx89uzcM43kq2+K2Y4xe+bj4aOvn/quc7kFrpiyyvh6AAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled-1.png\"\n        title=\"\"\n        src=\"/static/bf29101fba2fcc8bdc00f23e6ca95d68/5a46d/Untitled-1-1.png\"\n        srcset=\"/static/bf29101fba2fcc8bdc00f23e6ca95d68/c26ae/Untitled-1-1.png 158w,\n/static/bf29101fba2fcc8bdc00f23e6ca95d68/5a46d/Untitled-1-1.png 300w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Match 인스턴스에 연결된 Player 인스턴스로 간단한 구성이었지만, 자기 참조관계가 문제였다.</p>\n<p>새 데이터를 추가하려고 하면 Player목록을 만들고 <strong>상대를 직접 연결해줘야 했다.</strong> 상당히 복잡한 구조여서 고쳐야겠다고 마음을 먹었다. 하지만 이미 이 모델을 기반으로 짜여진 코드들이 많아서 새로 프로젝트를 시작하기로 결정했다. 데이터베이스를 조금 더 공부했었다면 이런 일이 없었을 것이다.</p>\n<h2 id=\"client-ui-프레임워크를-너무-믿었다\" style=\"position:relative;\"><a href=\"#client-ui-%ED%94%84%EB%A0%88%EC%9E%84%EC%9B%8C%ED%81%AC%EB%A5%BC-%EB%84%88%EB%AC%B4-%EB%AF%BF%EC%97%88%EB%8B%A4\" aria-label=\"client ui 프레임워크를 너무 믿었다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>(Client) UI 프레임워크를 너무 믿었다</h2>\n<p>Django 템플릿을 배울 때, UI를 디자인하기위해 <strong>Bootstrap</strong>을 이용했었다. 이제는 반응형 웹페이지를 위해 필수가 되어버렸는데, <strong>VueJS 3</strong>로 개발하는 환경에서는 이용할 방법을 못찾았다.</p>\n<p>가능한 UI 프레임워크를 다 찾아봤는데 <strong>Quasar, Vuestic, Primevue, Naive, Balm</strong> 등 꽤 많았다. 그 중에 <strong>Vuestic</strong>은 설치과정이 깔끔하고 문서도 잘 정리되어있어 활용하기도 편했다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/29b906bc0c469c49ba44b5648f1a118e/6be49/image-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.22784810126582%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABzUlEQVR42q1STWtTURDNspuqq6pRVCroylWXLlx24U8Q/A8igjTSKBbjop9p0hfTpI2xUIWu+geEtHQpKBR14weWEkITW5p378y9970jc5Ngsdh20YHzZjhv5rxz77xE6fVbCMrVdwhKVUzmXiFbWMBsYQFzxQqC8hKCxWXMBGWMT+WQDUrIFSvIFyuYm69ieWUVHz5t4uPmF7xf20AiiiIwMyRm8wEuX7mB8xcH0X/uAs4OXEPy+hCu3rqD23fvYfj+AwxcuolkchB9fWcwPZ31c8QM55xHQggRlaitbSCVfon0swxSo2NIPc3g+VgGIyNp5OffYP1rHROFJTwZfYGHjx6jVlvHwfk4jjuCpxWHBWPg+9YPfKv/xN5uAzutFhqNJn43d6FJg42FIgIbAyLyRzxSUIhfzW0091twhmCsgWprhPvKCxgRYobS2mfpP1JQ7kIaJUdRDOeibu1grT2EYwWFUEp7N0Tstx+Gytdak/9YhzceJxIMiaFEgI1H2K0Vd/jeO8nHCkpoccEMY20Xf+8t9O7ZH9c4dzKHbRnUBE2MNjEae+TdtDV5PiTybsn85w7l0YMsoPfHS63Y4XPdwFrnIUs6COn5d/4P2GlvsqjhH7AAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image-1\"\n        title=\"\"\n        src=\"/static/29b906bc0c469c49ba44b5648f1a118e/f058b/image-1.png\"\n        srcset=\"/static/29b906bc0c469c49ba44b5648f1a118e/c26ae/image-1.png 158w,\n/static/29b906bc0c469c49ba44b5648f1a118e/6bdcf/image-1.png 315w,\n/static/29b906bc0c469c49ba44b5648f1a118e/f058b/image-1.png 630w,\n/static/29b906bc0c469c49ba44b5648f1a118e/40601/image-1.png 945w,\n/static/29b906bc0c469c49ba44b5648f1a118e/6be49/image-1.png 1160w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>남아있는 사진이 없어서 흐릿한 이미지라도 긁어왔다</p>\n<p>사진은 개인 전적 페이지인데 Vuestic으로 개발한 모습이다. 차트는 ChartJS를 이용했고 파이모양 그래프는 직접 svg로 그렸다.</p>\n<p>개발을 막 시작할 땐 마음에 들었는데, 세세한 부분을 디자인하려고 하니 Vuestic 내에서 방법을 찾을 수 없었다. 게다가 전적 입력을 하려면 <strong>Validation</strong>이 필요했는데, 이것 또한 지원을 안하는 것 같았다.</p>\n<p>결국 제자리걸음을 반복하다가 서버를 갈아엎게 되면서 다른 UI 프레임워크를 찾게 되었다. 그렇지만 서버 때문에 갈아엎은건 아니었다.</p>\n<p>근본적인 이유는 UI 프레임워크만 있으면 따로 CSS를 다루지 않아도 된다 생각한게 문제였다. 그리고 <strong>더 필요한 도구가 있다면 직접 개발해 활용할 수 있어야</strong> 했는데, <strong>UI 프레임워크에 다 있을거라 믿고 땜질식으로 개발했던게</strong> 이유였다. 나중에는 <strong>PrimeVue</strong>와 <strong>PrimeFlex</strong>를 활용하면서 필요할 때는 CSS를 적절히 사용했다.</p>\n<h1 id=\"한-번-갈아엎고--22년-2월\" style=\"position:relative;\"><a href=\"#%ED%95%9C-%EB%B2%88-%EA%B0%88%EC%95%84%EC%97%8E%EA%B3%A0--22%EB%85%84-2%EC%9B%94\" aria-label=\"한 번 갈아엎고  22년 2월 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>한 번 갈아엎고  (22년 2월)</h1>\n<p>지지부진한 개발속도를 보고 더는 안되겠다 싶어서 다시 처음부터 시작했다. 이 때 편의점 야간 알바를 시작하면서 밤새 코딩하다가 새벽을 맞이하는 날들이 이어졌다.</p>\n<h2 id=\"server-개선된-모델\" style=\"position:relative;\"><a href=\"#server-%EA%B0%9C%EC%84%A0%EB%90%9C-%EB%AA%A8%EB%8D%B8\" aria-label=\"server 개선된 모델 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>(Server) 개선된 모델</h2>\n<p>프로젝트를 새로 시작한 이유는 복잡한 모델 때문이었다. 이 때 파워 오브 데이터베이스라는 책으로 진행한 스터디에 참여했었는데 약 한 달 정도였지만 정규화나 무결성을 따져보는 방법에 대해서 공부했었다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b4a52d5bb4baedd4a230f776d2b81924/d7542/image-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 177.8481012658228%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"이전 모델에 대한 분석\"\n        title=\"\"\n        src=\"/static/b4a52d5bb4baedd4a230f776d2b81924/f058b/image-2.png\"\n        srcset=\"/static/b4a52d5bb4baedd4a230f776d2b81924/c26ae/image-2.png 158w,\n/static/b4a52d5bb4baedd4a230f776d2b81924/6bdcf/image-2.png 315w,\n/static/b4a52d5bb4baedd4a230f776d2b81924/f058b/image-2.png 630w,\n/static/b4a52d5bb4baedd4a230f776d2b81924/d7542/image-2.png 810w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이전 모델에 대한 분석</p>\n<p>직접 관계도를 그려보면서 문제점을 찾아보기도 했었는데, 역시나 상대가 누군지 알아야 한다는게 이중레코드를 만들게 된다는 결론에 이르렀다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Model structure MK3</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Player</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    name <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    signup_date <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>DateField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Match</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># miscellaneous fields... (league, map, title, date, etc.)</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">PlayerTuple</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">match</span> <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ForeignKey<span class=\"token punctuation\">(</span>Match<span class=\"token punctuation\">,</span> on_delete<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CASCADE<span class=\"token punctuation\">)</span>\n    winner <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ForeignKey<span class=\"token punctuation\">(</span>Player<span class=\"token punctuation\">,</span> on_delete<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CASCADE<span class=\"token punctuation\">)</span>\n    loser <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ForeignKey<span class=\"token punctuation\">(</span>Player<span class=\"token punctuation\">,</span> on_delete<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CASCADE<span class=\"token punctuation\">)</span>\n    winner_race <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    loser_race <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>첫 번째 모델 구조와 많이 유사하지만 관계가 매우 단순해졌다.</p>\n<p>본인의 상대를 관계로 구성하지 않고, <strong>필드값을 추가함</strong>으로 매우 쉽게 알 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 380px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a82770cd75b0d49d1494524dd4727b5e/3f520/Untitled-1-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.53164556962025%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAABcUlEQVR42qVS23KbMBD1/39aDE3BsZUOFwWDbdkgbhIS6LLbwcw000z61POwklZ7zuweaYf/BgA6j2oBNYOx6OFrwe7Pzj0BAOviPaKvuEuZawRMCw4KWwmz+UtgB7CelVJFUez3+8PhkKZpGP6Io9fo/To7vLCG3Ws59kLq87VpmqYfhmmaPsld15knlFLee621tdY5h4gt55TmxxPhvOGc53lOCKnreiV77wFgHEdjzCa0ZbYIiGXFKC0ozfuuu1xvZVlSSjnnKzkIAkJIlmVb23EcJ0mytf3yVmUPTM7dL8qOyZVex0fT3+/sdrsJIVay1to517attXZZFiGEc04Iac3SS7M4vFTV8UReozd2r4tzScj76XRkjH3OPAyDlHKbc55na60xZjXd46ihl9bb2Tp4DF7PRqlpvfjidhAEURRlWRaGYRz9TD9YyZGPfrY4KqhHbyx8/86bVZvDT2FoBfQTCA2dBGW++UU7/A/8BpcSc7GDkG6nAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Untitled-1.png\"\n        title=\"\"\n        src=\"/static/a82770cd75b0d49d1494524dd4727b5e/3f520/Untitled-1-2.png\"\n        srcset=\"/static/a82770cd75b0d49d1494524dd4727b5e/c26ae/Untitled-1-2.png 158w,\n/static/a82770cd75b0d49d1494524dd4727b5e/6bdcf/Untitled-1-2.png 315w,\n/static/a82770cd75b0d49d1494524dd4727b5e/3f520/Untitled-1-2.png 380w\"\n        sizes=\"(max-width: 380px) 100vw, 380px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>모델이 확고해지자 개발 과정이 순탄해졌고 다른 고민을 할 수 있게 되었다.</p>\n<h2 id=\"server-실시간-elo-레이팅\" style=\"position:relative;\"><a href=\"#server-%EC%8B%A4%EC%8B%9C%EA%B0%84-elo-%EB%A0%88%EC%9D%B4%ED%8C%85\" aria-label=\"server 실시간 elo 레이팅 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>(Server) 실시간 Elo 레이팅</h2>\n<p>옛날 LOL에는 <strong>MMR</strong>이 존재했는데, 이 점수는 자신과 비슷한 수준의 상대를 만날 수 있는 기준이었다. 체스에서도 객관적 실력 측정을 위해 <strong>Elo 레이팅</strong>을 사용한다. 우리 할리클랜에서도 Elo 레이팅을 활용하고 있었다. 당연히 스프레드시트로 관리했기 때문에 손이 매우 많이 가는 작업이었다.</p>\n<p>개인 전적 조회 기능을 개발 완료한 후 Elo 레이팅을 관리하는 방법에 대해 몇 주를 낭비했다. 계산하는 방법은 잘 알고 있었지만, <strong>경기 결과가 수정되었을 경우</strong> Elo 레이팅은 어떻게 처리되는지 알고 싶었다.</p>\n<p>어떻게든 최적화된 쿼리로 수행해내는 코드를 짜고 싶었지만, ORM에서는 SQL을 완벽하게 따라하지 못한다는 것을 깨달았다.</p>\n<p>예시로, 어떤 블로거는 1번의 쿼리로 Elo를 계산하는 SQL쿼리를 만들었는데 RECURSIVE를 사용하고 있었다. ORM에서 활용할 수 있을까 찾아봤지만 그런 내용은 없었다.</p>\n<p>구글을 열심히 찾아보고 스택오버플로우에 질문도 해봤는데, 결국 <strong>데이터가 수정되었다면 Elo를 구하기 위해 다시 연산을 수행해야한다</strong>고 했다. 약간 미친 짓같지만, 요즘 성능으로는 거뜬하다는… 내용이었다.</p>\n<p><a href=\"https://stackoverflow.com/questions/26043337/elo-rating-mysql-design\">ELO rating - mysql design</a></p>\n<p><a href=\"https://stackoverflow.com/questions/71999007/optimal-table-design-for-elo-system\">Optimal table design for ELO system</a></p>\n<p>그래서 업데이트를 수행하는 View를 만들고 그 뷰에 <strong>정기적으로 요청을 넣는 방법</strong>을 채택했다.</p>\n<p>현재까지 쌓인 데이터의 수는 약 3천건이라서 성능이 부족해도 충분히 계산할 수 있었지만 내가 선택한 방법이 정말 옳은 것인지는 모르겠다. 1억건 이상의 데이터가 있었다면 어떻게 해야했을까?</p>\n<h2 id=\"server-client-작지만-큰-실수들\" style=\"position:relative;\"><a href=\"#server-client-%EC%9E%91%EC%A7%80%EB%A7%8C-%ED%81%B0-%EC%8B%A4%EC%88%98%EB%93%A4\" aria-label=\"server client 작지만 큰 실수들 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>(Server-Client) 작지만 큰 실수들</h2>\n<h3 id=\"cors\" style=\"position:relative;\"><a href=\"#cors\" aria-label=\"cors permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>CORS</h3>\n<p>웹에는 CORS라는 정책이 있는데, 출처가 다른 자원을 사용하지 못하게 강제하는 정책이다. 보안상의 이유인데, 사용자의 정보를 탈취하는 자원을 사용하도록 유도할 수 있기 때문이다.</p>\n<p>이 정책은 서버-클라이언트 간에도 적용되는데, 서버가 특정한 클라이언트만 자원을 사용할 수 있다고 <strong>Response의 헤더를 통해 알려주면</strong> 클라이언트는 그제서야 이용이 가능하다.</p>\n<p>이 개념을 제대로 이해하지 않고 클라이언트의 헤더에 잘못된 옵션을 넣어서 사용했었다. 하루종일 삽질을 했는데 결국 개념을 제대로 이해하는 것이 정답이었다.</p>\n<h1 id=\"서비스-시작-22년-3월\" style=\"position:relative;\"><a href=\"#%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%8B%9C%EC%9E%91-22%EB%85%84-3%EC%9B%94\" aria-label=\"서비스 시작 22년 3월 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>서비스 시작 (22년 3월~)</h1>\n<p>로컬환경에서 목표했던 기초 기능들을 완성했고, 시험용으로 배포를 해도 될 상황이었다. op.gg, <a href=\"http://poro.gg\">poro.gg</a> 등 gg도메인을 구입해 사용하려 했으나 가격이 15만원으로 매우 비쌌다. 생각했던 도메인은 haley.gg였는데 돈 때문에 haleygg.kr로 결정했다…</p>\n<p><strong>네이버 클라우드</strong>에 마이크로 서버를 구축하고, 클라이언트는 <strong>Netlify</strong>에 배포를 하면 되겠다고 생각했다. VueJS는 빌드를 거치면 정적파일이 나오니까 충분했다.</p>\n<h2 id=\"server-원격-서버-구축\" style=\"position:relative;\"><a href=\"#server-%EC%9B%90%EA%B2%A9-%EC%84%9C%EB%B2%84-%EA%B5%AC%EC%B6%95\" aria-label=\"server 원격 서버 구축 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>(Server) 원격 서버 구축</h2>\n<p>문제는 원격 서버 구축은 처음이었다. 리눅스는 고등학생 이후로 만져본 적이 없어서 정말 간단한 명령어들밖에 모르고 있었다.</p>\n<p><strong>Nginx</strong>와 <strong>uWSGI</strong>를 설치하고 구동하는 데에만 사흘이나 걸렸다. 화장실 갈 때 빼고 자리에서 일어난 적이 없었던 것 같다. Https를 적용하기 위해 <strong>LetsEncrypt</strong>도 활용했다.</p>\n<p>설치과정은 블로그에 정리했다.</p>\n<p><a href=\"https://10cheon00.tistory.com/2\">AWS 프리티어 + Nginx + uWSGI + Django 설치</a></p>\n<p>그런데, 생각했던 것만큼 네이버 클라우드 서버가 빠르지 않았다. 응답하는데 평균 <strong>500ms</strong>정도 걸렸는데, 토이프로젝트로 코로나19앱을 만들 때 사용한 <strong>아마존 프리티어 서버</strong>가 월등히 빨랐다는 것을 알게 되었다.</p>\n<p>게다가 Netlify에 배포한 클라이언트에 접속할 때도 느릿느릿 동작하는 모습을 보고 다른 서버를 활용해야겠다고 느꼈다. 결국 아마존에 서버를 구축하고, 네이버에 클라이언트를 배포했다.</p>\n<h1 id=\"후기\" style=\"position:relative;\"><a href=\"#%ED%9B%84%EA%B8%B0\" aria-label=\"후기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>후기</h1>\n<p>내 입맛대로 개발한 프로젝트지만 이걸 실제로 사용자들에게 배포하는 과정을 겪어본 점에서 나에게 의미가 매우 크다.</p>\n<p>개발을 시작할 때는 바로 모델, 뷰 등을 작성했었지만 개발 막바지에 들어서 테스트를 작성하며 <strong>테스트 주도 개발</strong>의 필요성을 느꼈다. 다른 프로젝트를 시작할 때 TDD를 적용해 시작했더니 미묘하지만 잘 작동하더라.</p>\n<p>Git에도 그날 한 내용을 한 번의 커밋으로 올려버렸더니, 나중에 커밋 로그를 읽을 때 매우 이해하기 힘들었다. 이후 협업할 때 사용하는 컨벤션을 적용해 여러 개로 쪼개 커밋하니 어떤 기능을 개발했는지 눈에 확 들어왔다.</p>\n<p>이제 다른 사람들이 따라가는 <strong>규칙이나 암묵적인 룰</strong>이 있다면 나도 그것을 지켜야 개발속도가 올라간다는 것을 깨달았다.</p>","frontmatter":{"title":"Haleygg 사이트 제작기","date":"July 08, 2023","description":"스타크래프트 전적 검색기 사이트를 제작한 경험입니다.","tags":["python","django","js","vue"]}},"previous":{"fields":{"slug":"/2d-웹게임-프레임워크-제작기/"},"frontmatter":{"title":"2D 웹 게임 프레임워크 제작기"}},"next":{"fields":{"slug":"/백준-24723/"},"frontmatter":{"title":"백준 24723"}}},"pageContext":{"id":"cd1678ca-c190-5e9b-a010-5278368d13e6","previousPostId":"0973c35e-75e9-57fb-99a5-0374c791a06c","nextPostId":"d47d4329-cf3f-54da-ac3f-01814eb4b89b"}},"staticQueryHashes":["230163734","3589320610"],"slicesMap":{}}