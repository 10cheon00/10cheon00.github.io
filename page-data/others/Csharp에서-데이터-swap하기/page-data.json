{"componentChunkName":"component---src-templates-blog-post-js","path":"/others/Csharp에서-데이터-swap하기/","result":{"data":{"site":{"siteMetadata":{"title":"10cheon00의 Archive"}},"markdownRemark":{"id":"7adcc8e1-3d1e-51ba-8868-ce4379754ff1","excerpt":"문제 유니티로 게임을 개발하기 위해 스크립트를 짜고 있었다. 리스트에 들어있는 인스턴스와 다른 인스턴스를 교환(swap…","html":"<h1 id=\"문제\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C\" aria-label=\"문제 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>문제</h1>\n<p>유니티로 게임을 개발하기 위해 스크립트를 짜고 있었다. 리스트에 들어있는 인스턴스와 다른 인스턴스를 교환(swap)하는 코드를 짜고 있었는데, 아무리 해도 바뀌지 않는 것이었다.</p>\n<p>변수의 형식에 대해 어렴풋이 이해를 하고 있어서 교환이 제대로 안되는 이유를 몰랐다. 참조 형식이면 포인터 아닌가? 라고 생각해, 교환이 될 것이라고 생각했었지만 되지 않았다.</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Program</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">A</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">public</span> <span class=\"token function\">A</span><span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">int</span></span> data <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">public</span> <span class=\"token class-name\"><span class=\"token keyword\">int</span></span> data<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">Main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">string</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span> args<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">A</span> a1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">A</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> a2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">A</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// a1.data = 0, a2.data = 10</span>\n        <span class=\"token function\">Swap</span><span class=\"token punctuation\">(</span>a1<span class=\"token punctuation\">,</span> a2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// a1.data = 10, a2.data = 0 ...?</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">Swap</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">A</span> a1<span class=\"token punctuation\">,</span> <span class=\"token class-name\">A</span> a2<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">A</span> t <span class=\"token operator\">=</span> a1<span class=\"token punctuation\">;</span>\n        a1 <span class=\"token operator\">=</span> a2<span class=\"token punctuation\">;</span>\n        a2 <span class=\"token operator\">=</span> t<span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// for test</span>\n        Console<span class=\"token punctuation\">.</span><span class=\"token function\">WriteLine</span><span class=\"token punctuation\">(</span><span class=\"token interpolation-string\"><span class=\"token string\">$\"</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token expression language-csharp\">a1<span class=\"token punctuation\">.</span>data</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">, </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token expression language-csharp\">a2<span class=\"token punctuation\">.</span>data</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이전에 형식에 대해 잠깐 읽었던 기억에 의존하면, 클래스는 <strong>참조 형식</strong>이어서 인스턴스를 생성하면 실제 데이터는 힙에 저장되고, 변수는 그 메모리를 참조하게 된다고 이해했었다.</p>\n<p>그래서 저 코드대로 실행하면 Swap 메소드의 파라미터는 main 함수 안에 있는 a1, a2가 가리키는 메모리를 참조하는 변수가 될 것이라고 생각했고, swap과정을 통해 서로 참조하는 메모리가 교환될 것이라고 이해했었다.</p>\n<h1 id=\"디버깅-해보기\" style=\"position:relative;\"><a href=\"#%EB%94%94%EB%B2%84%EA%B9%85-%ED%95%B4%EB%B3%B4%EA%B8%B0\" aria-label=\"디버깅 해보기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>디버깅 해보기</h1>\n<p>이 코드를 그대로 vs의 디버거로 확인해보면 예상했던 대로 <em>동작하기는 한다.</em></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 560px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0288135dc844c495b64c3c715fe72f59/b06ae/image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.9493670886076%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAADB0lEQVR42nWT205bRxSG/QZt7IiC2eeZ2eftbe+Dj4BxCIEgHIMhTS8Q6oFgoJVaqb3oi7RSo5C0yoN+lTehbSR68WktaTT/rMM/NdM0cIQgSjP8KMESCkf55HmbKI4xhYvjRdiOgykVliNY1zQ0XX+QmmEYSOWh4gJT+FgyRAYJ482SLOtgqIh2VnD4ZMTmoM9G1iL3LNpSf5CaaZo4joNh6Fi+h3BdTFvQlBFeHOF5y2oLzq9/Ids5pj2ZVTEcHVQEw+f4g/1/8krQNC0M0yTJY7JBRjrs0OrntIoU4Rokkz28H25ZWfxJ4/Ut9Yu3NF6/o37xjpWrv1i7+cCjb9/wxeL9vaDJsvVn+1ucvJqxdzRlfzZlvLONbuu0fMGzyTaDLKXlKVJf0Q7cKnbTmFGZ0w598iS6ExRCYNsWmqWjCx07MDGlgSkMLM8mDSz6u3MG39+y8eMHiqu3ZJdvKtoXf5Bd/M7Bz++Z3Pz27wxty6iq1DUdramx3tTQ1jWaTY3IMQiTDp2tKZtPp/jtPk6YI6ICEea4SclwvEdvY+dOcGmJsJXhBXFlG1t5BIGLF7hVnviCIAiJ2zndvIMrHSxDwzZ1bFPDsUzyTodOq7UUNLAdiR2kGNLHciNsN6TIY9IsQcYpndgnTlL8qIWrXJRykVJ9QtbJKIsuNV3X6ZYlRd5BKYGSEj9pYwuJ1myiaRqhMPGUREhZXVYfRf+L44hqdDVD1+mPRhyMt/kqKkk1hZP0WF3ReNxY41F9Danr+K5XfQDX9R9k6dclNW19nbwsmQyG/Dp/wk+Xu3x3/ZyzswFn5xucf73J6Yse460Jw+GIKEyIotb/Ui1FVq1I5vOSxfU2l4sxl4ttFlcTFjcTvnnVZ28yYXvylCLv0usOKPIeZdmnLHvkeZei6FVnNaVU5cNl649XmtTrq9TrazTqqzQaa3z2+SqRpbM7HnE4Pebl6Ze8OJwxnR5zenKXHx+dcDSbM3sxp7YcpGVZFbZt4zifYjs2obKrZS0fv0fe5/Ijy+VIxd8+g9Rl8xaI7AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alt text\"\n        title=\"\"\n        src=\"/static/0288135dc844c495b64c3c715fe72f59/b06ae/image.png\"\n        srcset=\"/static/0288135dc844c495b64c3c715fe72f59/c26ae/image.png 158w,\n/static/0288135dc844c495b64c3c715fe72f59/6bdcf/image.png 315w,\n/static/0288135dc844c495b64c3c715fe72f59/b06ae/image.png 560w\"\n        sizes=\"(max-width: 560px) 100vw, 560px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Swap 메소드 내에서 a1의 참조 값과 a2의 참조 값이 교환되었다. 하지만 Swap 메소드 스코프에서 잠깐 벗어나 Main 함수의 스코프로 돌아가보면,</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 560px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/82b304e023e979903b428ed792504042/b06ae/image-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.9493670886076%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC/UlEQVR42n2TWW/bRhSF+QdaIA5QKIlEkbORHJKiKFEktVmWLae1ZHmJa9RL35o8pC2aoAsK9LlP/dNfQTkJXBTtw4d7MMAc4My54+jAEucVJkrwlMWmPWbTEXGa0dUxJu6hTICMEnwhaLfbdDqd/8TRQYQIE1xf4euY0MaMqxybpHRESL8YM50fMKjn9PMhURQTRfYfhOEDNghxhO/jum1MGuGLLs+7gpZvCG1AYGOKesJif0nWyymKmsGgJMsGO9K0T6/X6CG9Xk6SlQ+G0hhEtWRxecHFd9+wvbtmMK3wA5/xbMp8dvBglo/I89HOtJnT6YJyNCbrDSiLgmL16qNhSHey5fj2nrd/vOf1b++pjvbxpEuaZSwPDun3c5IkJY4fsDZhOBzRLyu0TehlfSZViaOUwvM9Om6LKDGM9yvKaogvuwgjUFowrBfM5kuiMCKKkp1ZY6pMyHma88PxmsVkSn+8wpFCIDwPt91BS4mWhkAluG2X9osXSN+nmK14ubnmaHm0e68mos2GrOOMi6Lm6+Uxb5bHLFZf4aggwuYlOopxpSXKAw6uNElhkaHFGEOY5OTVjOEgx/cFvufT9ny+dD2iIGKe9blMMtJ8gKNMhGcsrifpSkuYBRyeJ8QDi9qtQ4SUCpv06Gc5WhuU0vhKU0nNaYPSBEKim7XRSmICTToqaHSSlzxvNXHbdLsdmjduDJSUiOaSNp8Q2mC1RmuNbM6UxqnriqvrG9aX93iqR1elPH3aYm+vxZMnLYQwWBvvFvrjAj/GhJbgg26m0zR3/PKQP/96zS+/n/Hzrye8/X7Jjz+tePfuiM12wXx+yHBYEIZNw+n/4jQxpOhydVVwc1Nzezfm7n7C/f2U22+nXG0qDg+W7O8vqMqayXjyYU6pyjGjUUVdjynLmrqe4Pi7r+eyt/dsF/Exn33+BcUgZ7lccXKy5Xx7yfrklPX6jLPtJafrM9YnW043F2w252zWZzie59EghP8vZDOVIgwMgQk+lWEe66b1R0X9DRVw0WiTpubeAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alt text\"\n        title=\"\"\n        src=\"/static/82b304e023e979903b428ed792504042/b06ae/image-1.png\"\n        srcset=\"/static/82b304e023e979903b428ed792504042/c26ae/image-1.png 158w,\n/static/82b304e023e979903b428ed792504042/6bdcf/image-1.png 315w,\n/static/82b304e023e979903b428ed792504042/b06ae/image-1.png 560w\"\n        sizes=\"(max-width: 560px) 100vw, 560px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Main 함수 내에서는 참조가 바뀌지 않았다. 이 이유를 그림으로 그리면 이렇다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 400px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ca3a72af40cf46593ea20a2b97480544/e17e5/image-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAACCklEQVR42q2VWW/aQBRG8/9/QN6Sh1ZqpapSKrVPfSCETRQKPCQQQWjZg+Nig/dt7FONgykIGoHESFee9cyde78ZX3DmcrHdcGyL2XSGoqiEYXRwQZIk6VfTNXrdLqPRmDhO9oFxHPM8nZDP5bjNF3lR/xAE/kGo63mMp2MqlRLFUgVtudxstAE6joNt25tFnuexWq12vMqKZVgk4l+ftbKIomgfKCFZkRNM09x3L4Z7tUdD69BUOzQXj5RnTfzIPw0ovfR9P51zpzQYmDOuPr8jXy9S0FvovnEaUMKCIEjr38YFrvtfuGx+5PrxhsvuJ6zQOR4ovZNjQoj0W1AajOw5N7mv1Dst7rQWy8A8HihB0kNpsRC01A517YHCsM7Plza3zzXc0DseKCXluu7myI5pk2xpT7ZFJE4DyvEMuDIMIiGI13JK2wdl48rAJqlFYYBpGAeBhmGkfVmRG28BX3dxXBfP93c8NExrA5SiPw64djswFoS/a6C0Yf6AGNRw5/21ZLwUKJOTAf4P1CdgaTBswKTBatjGmvZA6SD6ZfyY9PgyvhnkbaA2QVryqwqVK9zye/zqh7Qet7/Lm0boe6lkMk2+DcwuvtqHpzxmr4r99AMGFeJ+CU9I4O6ro+t6CpFhkMlSVXU/KcQhWCo4i1czFQicg8+XjKVM0LYdfGDZiOZML/Y5fgF/AfXsEBVCCW64AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alt text\"\n        title=\"\"\n        src=\"/static/ca3a72af40cf46593ea20a2b97480544/e17e5/image-2.png\"\n        srcset=\"/static/ca3a72af40cf46593ea20a2b97480544/c26ae/image-2.png 158w,\n/static/ca3a72af40cf46593ea20a2b97480544/6bdcf/image-2.png 315w,\n/static/ca3a72af40cf46593ea20a2b97480544/e17e5/image-2.png 400w\"\n        sizes=\"(max-width: 400px) 100vw, 400px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><code class=\"language-text\">Swap()</code>을 호출하기 전에는 메모리에 이렇게 저장되어 있다. 힙 메모리에 실제 인스턴스가 저장되어있고, 그 메모리에 대한 참조가 스택에 저장되어 있다.(a1, a2에 각각 담긴다.)</p>\n<p>이제 Swap 메소드를 호출하면 어떻게 될까?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 400px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7af6188d8d975ef7d7a474f2d30b9bcd/e17e5/image-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAACcUlEQVR42q2VaU8TURSG+f+fDR9MhATXGBcSMTFgSimltEKLoGVpC9jpYjudpZ19f8ydLoBUkchNTmbuZO5z33vOmXcWeOCxcH1iWyaddodeTyYIwrkLkiRJr6qmUjs7o9mUiOPkNjCOY7rtFtlMhs3sNn15gO97c6GO6yK1JQqFPNv5AqquzzaaAW3bxrKs2SLXdRkOhzdUpfckmCOTJLp6Zg5NwjC8DRSQ6RAvGIYxV+E3uUZZPaYiH1NRTtjpVPBC79+BU4VCcbvdZkPa5YfV5cmbFbJ72+S0AzRvdD+FjuOkMDHWpBxLjVUWKy9ZOnnP4tlrzMC+H1DXdVRVRVEUNpoFJKfHu8wH9o4P2FIP0H3jfkfu9/u0Wi10VaPSr7KvVsld7rHfr7LZ/YITuBPgJD+2ZWEOOkSmkoajdhlqygQYp8dtNptEUYRj2CRxfNW/hkUURr8BO3WG37cYXhyhNb5i1oqo1Tx+DANZptvtIsvyuDijEWEUEU+LJebTtrHOD3GkU9TSR/rrj5Eyz5EyLxhklvmZf4sdgueOCzIajSsprvE1hSI1M2DkmMSuyei0iFJcpXe4Rf8oh1b5RK+0huVHqUKhLgiCu4HTI3vtE0brj9C3VhjmnmJ8XsQoryEQjm2lRRP5uxuotcBUSJplOC+g18sYF0fQLBPVd/ATCAM/7YApRAD+DFRbiEjOi1BYwik8wyu9gt1l4uoGYlnguXieN2uhvwOnH77cgHoWo1bEqpfgskDcyONGAnjTdTRNSyHCTEQqRH6vmcMEGAdgymAr4zB64NtzzUHk0vf9GzHXYMf2NNvi/x37IX4BvwCZegBpSyXcQQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alt text\"\n        title=\"\"\n        src=\"/static/7af6188d8d975ef7d7a474f2d30b9bcd/e17e5/image-3.png\"\n        srcset=\"/static/7af6188d8d975ef7d7a474f2d30b9bcd/c26ae/image-3.png 158w,\n/static/7af6188d8d975ef7d7a474f2d30b9bcd/6bdcf/image-3.png 315w,\n/static/7af6188d8d975ef7d7a474f2d30b9bcd/e17e5/image-3.png 400w\"\n        sizes=\"(max-width: 400px) 100vw, 400px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Swap의 파라미터인 a1, a2에 Main에서 생성했었던 a1과 a2의 참조가 복사되어 넘어간다. 이제 Swap 메소드 내에서도 같은 객체를 참조할 수 있다.</p>\n<p>하지만 교환하는 코드를 실행하고 나면 이렇게 된다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 400px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4ecbc44cf303251f238b96b3c98ab97b/e17e5/image-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAACdElEQVR42q2VaU/bQBCG+f+fKz5UKpXoqQq1SKhSRVEgB2lSSFIQhCMcjeOkSbAd2+szPp5qDUlDSWlRGWnkXcv77Lszs+MFHtkWZieuI+iqXfr9IeNxNHdBmqbZUzd0Tk9OaLcVkiS9C0yShJ7aYSuXY3OryGB4RRgGc6Ge76OoCuVyiWKpjD4aTTeaAl3XxXGc6SLf9zFN85aqbEyKsARp/OudMAVRFN0FSsjE5Ae2bc9VeHB1Sk1vUh82qWtHbHfrBFHwMKBUORwOUVWVjU6F76LHs5VltnaKFIwGRmA9DKjrOpqmZeM1Jc/S2SqL9TcsHX1g8eQdYuw+DDgYDLIYS2hOraK4fd7n1thpNsjrDUah/e/AOI4zYLfbxfc8aoNDdvVDCpc77A4O2ex9xRv7N8CbDLqOg7jqEgstc0/vYRratKTa7Ta9Xi+bOzLLM7Xn2g5xFP8G7LYwD/KYF/sYZ98Qp1W0gyIJYOg6zWYTz/Oyb03LIopjkpu12XxSNs75Hp5yjF79yGD9KUruFUruNVe55/RKK9hBhNpRMnXy6NIsy8pUT0yGZgqMPUHiC6zjClpllf5ensF+AaPxiR+VNWx/jDkaZTEOw/DvwMmRA/UIa/0Jo/wyZuEFYmMRa3cNqSkKA4QQU4US8Geg0QGhkbZrcF5m1KphX+xDu0bc2iZMJTDMKmACuR+od5CenlegvIRXfklQfQtfnpMcfs6SMg58giCY3pj7gZOLPzyD1hb2aQWnVYXLMslZCT+WwNtdxzCMDCILXcZWXsmZ5nADTMYghuBq1273IXTnNgcZS5mgWZ/bYK/b03SL/+/Yj/EL+An1swCQBlkilAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Alt text\"\n        title=\"\"\n        src=\"/static/4ecbc44cf303251f238b96b3c98ab97b/e17e5/image-4.png\"\n        srcset=\"/static/4ecbc44cf303251f238b96b3c98ab97b/c26ae/image-4.png 158w,\n/static/4ecbc44cf303251f238b96b3c98ab97b/6bdcf/image-4.png 315w,\n/static/4ecbc44cf303251f238b96b3c98ab97b/e17e5/image-4.png 400w\"\n        sizes=\"(max-width: 400px) 100vw, 400px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><em><strong>Swap 메소드의 스코프 내에서 a1과 a2가 각각 참조값을 교환했을 뿐</strong></em>, Main 함수에 있는 변수의 참조값은 바뀌지 않았다.</p>\n<p>이 이유는 파라미터로 넘겨줄 때 <strong>참조값이 복사되어 새로운 변수에 저장되었기 때문이다</strong>. 이를 해결하기 위해 <code class=\"language-text\">ref</code> 키워드를 사용하여야 한다.</p>\n<h1 id=\"ref\" style=\"position:relative;\"><a href=\"#ref\" aria-label=\"ref permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>ref</h1>\n<p>파라미터에 전달되는 값이 참조임을 나타낸다. 파라미터에 <code class=\"language-text\">ref</code>가 사용되었으면 함수를 호출할 때에도 <code class=\"language-text\">ref</code>키워드를 사용하여 참조가 전달되도록 해야한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">ref</span> <span class=\"token class-name\"><span class=\"token keyword\">int</span></span> A<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token punctuation\">}</span>\n\n<span class=\"token class-name\"><span class=\"token keyword\">int</span></span> data <span class=\"token operator\">=</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">foo</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">ref</span> data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>주의할 점은 <code class=\"language-text\">ref</code>키워드가 사용된 변수는 선언과 동시에 초기화되어야 한다는 점이다. 게다가 <code class=\"language-text\">null</code>을 가질 수 없다.</p>\n<p><code class=\"language-text\">ref</code>로 전달된 파라미터는 인자로 전달되는 변수와 <strong>똑같은 모습으로 작동한다</strong>. 같은 인스턴스를 가리킬 뿐만 아니라, 변수에 다른 인스턴스의 참조가 저장되었을 경우 인자로 전달되었던 변수도 다른 인스턴스를 가리키게 된다.</p>\n<p><strong>C++의 레퍼런스</strong>(<code class=\"language-text\">&amp;</code>)와 매우 유사한 개념이다. 같은 변수를 다른 이름으로 부르는 것으로 보면 될 것 같다.</p>\n<p>또다른 효과는 반환에 의한 복사나 함수 호출에 의한 복사가 일어나지 않는다는 점이다. 단순히 변수의 별칭을 만들어 전달하기 때문에 값을 복사하는데 드는 비용을 줄일 수 있다.</p>\n<h1 id=\"결과\" style=\"position:relative;\"><a href=\"#%EA%B2%B0%EA%B3%BC\" aria-label=\"결과 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>결과</h1>\n<p>종합해보면, 어떤 두 변수의 참조값을 다른 스코프에서 교환하고 싶을 때에는 <code class=\"language-text\">ref</code>키워드로 참조로 전달해야한다. <code class=\"language-text\">ref</code>키워드를 사용하지 않으면 값으로 전달된다.</p>\n<p>Main 함수에 선언된 a1과 a2가 가진 참조를 Swap 메소드를 통해 교환하려면 <strong>a1과 a2의 별칭을 인자로 받도록</strong> 만들면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Program</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">class</span> <span class=\"token class-name\">A</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">public</span> <span class=\"token function\">A</span><span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">int</span></span> data <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>data <span class=\"token operator\">=</span> data<span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">public</span> <span class=\"token class-name\"><span class=\"token keyword\">int</span></span> data<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">static</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">Main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">string</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></span> args<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">A</span> a1 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">A</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> a2 <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">A</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        Console<span class=\"token punctuation\">.</span><span class=\"token function\">WriteLine</span><span class=\"token punctuation\">(</span><span class=\"token interpolation-string\"><span class=\"token string\">$\"</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token expression language-csharp\">a1<span class=\"token punctuation\">.</span>data</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">, </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token expression language-csharp\">a2<span class=\"token punctuation\">.</span>data</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 0, 10</span>\n        <span class=\"token function\">Swap</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">ref</span> a1<span class=\"token punctuation\">,</span> <span class=\"token keyword\">ref</span> a2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        Console<span class=\"token punctuation\">.</span><span class=\"token function\">WriteLine</span><span class=\"token punctuation\">(</span><span class=\"token interpolation-string\"><span class=\"token string\">$\"</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token expression language-csharp\">a1<span class=\"token punctuation\">.</span>data</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">, </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token expression language-csharp\">a2<span class=\"token punctuation\">.</span>data</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 10, 0</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">static</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">Swap</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">ref</span> <span class=\"token class-name\">A</span> a1<span class=\"token punctuation\">,</span> <span class=\"token keyword\">ref</span> <span class=\"token class-name\">A</span> a2<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">A</span> t <span class=\"token operator\">=</span> a1<span class=\"token punctuation\">;</span>\n        a1 <span class=\"token operator\">=</span> a2<span class=\"token punctuation\">;</span>\n        a2 <span class=\"token operator\">=</span> t<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>   \n<span class=\"token punctuation\">}</span></code></pre></div>\n<h1 id=\"참고-문서\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0-%EB%AC%B8%EC%84%9C\" aria-label=\"참고 문서 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>참고 문서</h1>\n<p><a href=\"https://learn.microsoft.com/ko-kr/dotnet/csharp/language-reference/keywords/ref\">ref 키워드 - C# 참조 | Microsoft Learn</a></p>","frontmatter":{"title":"Csharp에서 데이터 swap하기","date":"July 17, 2023","description":"ref키워드를 이용해 값을 교환하는 방법에 대해 공부한 글입니다.","tags":["csharp"]}},"previous":{"fields":{"slug":"/others/Csharp의-형식/"},"frontmatter":{"title":"Csharp의 형식"}},"next":{"fields":{"slug":"/design-patterns/빌더-패턴/"},"frontmatter":{"title":"빌더 패턴"}}},"pageContext":{"id":"7adcc8e1-3d1e-51ba-8868-ce4379754ff1","previousPostId":"f02779ee-330f-53df-a383-29d4ca26a439","nextPostId":"9415f16b-3491-58ab-abbc-bdb1e34bfd4f"}},"staticQueryHashes":["230163734","3589320610"],"slicesMap":{}}