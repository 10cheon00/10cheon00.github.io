{"componentChunkName":"component---src-templates-blog-post-js","path":"/design-pattern/추상-팩토리-패턴/","result":{"data":{"site":{"siteMetadata":{"title":"10cheon00의 Archive"}},"markdownRemark":{"id":"a1922f90-9619-5291-9b43-55ea5595612b","excerpt":"…","html":"<h1 id=\"의도\" style=\"position:relative;\"><a href=\"#%EC%9D%98%EB%8F%84\" aria-label=\"의도 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>의도</h1>\n<p>서로 관련성이 있거나 독립적인 여러 객체의 <strong>집합</strong>을 생성하기 위한 인터페이스를 제공한다.</p>\n<h1 id=\"사용-시기\" style=\"position:relative;\"><a href=\"#%EC%82%AC%EC%9A%A9-%EC%8B%9C%EA%B8%B0\" aria-label=\"사용 시기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>사용 시기</h1>\n<ul>\n<li>\n<p>클래스 라이브러리를 제공하되 구현이 아닌 <strong>인터페이스</strong>를 노출하고 싶을 때</p>\n</li>\n<li>\n<p>관련된 객체들이 <strong>함께 사용되도록</strong> 설계되었고, 이 부분에 대한 제약이 지켜지길 바랄 때</p>\n<blockquote>\n<p>자동차 뼈대, 타이어, 차 유리를 팩토리로 생성하게 만들면 자동차와 관련된 객체들은 이 팩토리를 이용하여 생성하도록 강제된다.</p>\n</blockquote>\n</li>\n<li>\n<p>여러 제품군 중 하나를 선택해서 시스템을 설정해야 하고, 한번 구성한 제품을 쉽게 대체할 수 있어야 할 때</p>\n<blockquote>\n<p>자동차 추상 팩토리는 경차, 중형차 또는 대형 버스 등 여러 구체 팩토리 클래스가 생길 수 있다. 이들은 모두 자동차 추상 팩토리에 정의된 인터페이스에 의존성을 가지므로 한 구체 팩토리 클래스는 다른 구체 팩토리 클래스로 쉽게 대체될 수 있다.</p>\n</blockquote>\n</li>\n</ul>\n<h1 id=\"장점\" style=\"position:relative;\"><a href=\"#%EC%9E%A5%EC%A0%90\" aria-label=\"장점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>장점</h1>\n<p>팩토리는 <strong>객체를 생성하는 과정과 책임을 캡슐화한 것</strong>이므로, 사용자로부터 구체적인 구현 클래스가 분리된다. 팩토리의 인터페이스에 의해 생성된 인스턴스를 조작하게 되므로, 클래스 이름이 드러나지 않게 된다. (사용자가 직접 생성하지 못하도록 강제?)</p>\n<p>추상 팩토리를 상속받아 구체 팩토리를 구현하고, 구체 팩토리를 이용해 인스턴스를 생성할 때 구체 팩토리는 단 한 번 등장하게된다. 그러므로 인스턴스를 변경하지 않고 <em>구체 팩토리를 변경하는 것만으로도</em> 같은 군에 속하는 다른 객체를 사용할 수 있게 된다.</p>\n<p>인스턴스를 생성하기 위해 무조건 팩토리를 사용하므로, 같은 군에 속하는 객체들만 사용하도록 일관성을 가지게할 수 있다.</p>\n<h1 id=\"단점\" style=\"position:relative;\"><a href=\"#%EB%8B%A8%EC%A0%90\" aria-label=\"단점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>단점</h1>\n<p>기존에 정의된 추상 팩토리를 확장하기 어렵다. 추상 팩토리에 새로운 객체를 생성하는 연산을 정의할 경우 모든 구체 팩토리에서 그 연산을 구현해야하기 때문이다.</p>\n<h1 id=\"구현\" style=\"position:relative;\"><a href=\"#%EA%B5%AC%ED%98%84\" aria-label=\"구현 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>구현</h1>\n<p>자동차에 필요한 차 뼈대, 타이어, 유리창을 생성해야한다고 가정하자.</p>\n<p>이들은 모두 자동차 부품 공장에서 생산되므로 하나의 팩토리에서 생성할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// 자동차를 생성하는 인터페이스를 가진 추상 팩토리다.</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">VehicleFactory</span> <span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n    <span class=\"token function\">VehicleFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">virtual</span> CarFrame<span class=\"token operator\">*</span> <span class=\"token function\">MakeCarFrame</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token function\">CarFrame</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">virtual</span> Tire<span class=\"token operator\">*</span> <span class=\"token function\">MakeTire</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token function\">Tire</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">virtual</span> CarGlass<span class=\"token operator\">*</span> <span class=\"token function\">MakeCarGlass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token function\">CarGlass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>VehicleFactory라는 추상 팩토리를 정의한 후 이 추상 팩토리를 상속받아 구체 팩토리 클래스로 만들어 사용하면 된다.</p>\n<blockquote>\n<p>책에서 제시한 예제에서는 추상 팩토리를 추상 클래스로 정의하지 않았는데, 인터넷에 올라와 있는 다른 예제들은 추상 클래스로 정의되어 있다.</p>\n</blockquote>\n<p>만약 유리창이 필요없는 자동차를 만든다고 하면 필요없는 연산을 정의해야하므로 추상클래스로 선언하지 않은 것 같다.</p>\n<p>같은 추상 팩토리를 상속받아 버스를 만드는 팩토리도 구현할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">BusFactory</span> <span class=\"token operator\">:</span> <span class=\"token base-clause\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">VehicleFactory</span></span> <span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n    <span class=\"token function\">BusFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">virtual</span> CarFrame<span class=\"token operator\">*</span> <span class=\"token function\">MakeCarFrame</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token function\">BusFrame</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">// BusFrame은 CarFrame을 상속한다.</span>\n        <span class=\"token comment\">// BusTire, BusGlass도 그렇다.</span>\n    <span class=\"token keyword\">virtual</span> Tire<span class=\"token operator\">*</span> <span class=\"token function\">MakeTire</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token function\">BusTire</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">virtual</span> CarGlass<span class=\"token operator\">*</span> <span class=\"token function\">MakeCarGlass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token function\">BusGlass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>SUV를 생성하는 구체 팩토리 클래스를 구현할 수도 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">SUVFactory</span> <span class=\"token operator\">:</span> <span class=\"token base-clause\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">VehicleFactory</span></span> <span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n    <span class=\"token function\">SUVFactory</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">virtual</span> CarFrame<span class=\"token operator\">*</span> <span class=\"token function\">MakeCarFrame</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token function\">SUVFrame</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n        <span class=\"token comment\">// SUVFrame은 CarFrame을 상속한다.</span>\n        <span class=\"token comment\">// SUVTire, SUVGlass도 그렇다.</span>\n    <span class=\"token keyword\">virtual</span> Tire<span class=\"token operator\">*</span> <span class=\"token function\">MakeTire</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token function\">SUVTire</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">virtual</span> CarGlass<span class=\"token operator\">*</span> <span class=\"token function\">MakeCarGlass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token function\">SUVGlass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>각 부품을 생성하여 차량을 생성하는 메소드가 있다고 할 때, 버스를 생성해야한다면 아래처럼 요청하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">void</span> <span class=\"token function\">MakeVehicle</span><span class=\"token punctuation\">(</span>VehicleFactory <span class=\"token operator\">&amp;</span>factory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    CarFrame<span class=\"token operator\">*</span> carFrame <span class=\"token operator\">=</span> factory<span class=\"token punctuation\">.</span><span class=\"token function\">MakeCarFrame</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    Tire<span class=\"token operator\">*</span> tire <span class=\"token operator\">=</span> factory<span class=\"token punctuation\">.</span><span class=\"token function\">MakeTire</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    CarGlass<span class=\"token operator\">*</span> carGlass <span class=\"token operator\">=</span> factory<span class=\"token punctuation\">.</span><span class=\"token function\">MakeCarGlass</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">}</span>\n\nBusFactory busFactory<span class=\"token punctuation\">;</span>\n<span class=\"token function\">MakeVehicle</span><span class=\"token punctuation\">(</span>busFactory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>만약 SUV를 생성해야한다면 단순히 구체 팩토리만 바꿔 요청하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">SUVFactory suvFactory<span class=\"token punctuation\">;</span>\n<span class=\"token function\">MakeVehicle</span><span class=\"token punctuation\">(</span>suvFactory<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>만약 자동차 부품이 추가되어 사이드 미러를 달아야하는 변경점이 생겼다고 하자. 추상 팩토리에 사이드미러를 생성하는 연산이 추가되었다면 구체 팩토리에도 모두 추가되어야 한다. 이런 점에서 불가피한 수정이 필요하므로 비용이 생긴다.</p>\n<h2 id=\"싱글턴-팩토리\" style=\"position:relative;\"><a href=\"#%EC%8B%B1%EA%B8%80%ED%84%B4-%ED%8C%A9%ED%86%A0%EB%A6%AC\" aria-label=\"싱글턴 팩토리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" width=\"16\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\"><path fill-rule=\"evenodd\" d=\"m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z\"></path></svg></a>싱글턴 팩토리</h2>\n<p>추가 바람</p>","frontmatter":{"title":"추상 팩토리 패턴","date":"July 16, 2023","description":"GoF의 디자인 패턴이라는 책에 소개된 추상 팩토리 패턴에 대해 정리한 글입니다.","tags":["design-pattern"]}},"previous":{"fields":{"slug":"/design-pattern/디자인패턴-용어-정리/"},"frontmatter":{"title":"디자인 패턴 용어 정리"}},"next":{"fields":{"slug":"/Csharp의-형식/"},"frontmatter":{"title":"Csharp의 형식"}}},"pageContext":{"id":"a1922f90-9619-5291-9b43-55ea5595612b","previousPostId":"278a4885-341b-5002-9792-cac137d8151e","nextPostId":"0fd0462e-25fa-59e0-84a0-04a893c353b5"}},"staticQueryHashes":["230163734","3589320610"],"slicesMap":{}}